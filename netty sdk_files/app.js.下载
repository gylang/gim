function c(t){if(b[t])return b[t].exports;var e=b[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,c),e.l=!0,e.exports}var a,b;b={},c.m=a=[function(t,e,i){"use strict";function n(t,e,i,n,a,s,r,o){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):a&&(l=o?function(){a.call(this,this.$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}i.d(e,"a",function(){return n})},function(t,e,i){t.exports=i(5)},function(t,e){function l(t,e,i,n,a,s,r){try{var o=t[s](r),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,a)}t.exports=function(o){return function(){var t=this,r=arguments;return new Promise(function(e,i){var n=o.apply(t,r);function a(t){l(n,e,i,a,s,"next",t)}function s(t){l(n,e,i,a,s,"throw",t)}a(void 0)})}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e,i){var n=function(s){"use strict";var l,t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},a=e.iterator||"@@iterator",i=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function r(t,e,i,n){var s,r,o,l,a=e&&e.prototype instanceof _?e:_,c=Object.create(a.prototype),u=new j(n||[]);return c._invoke=(s=t,r=i,o=u,l=h,function(t,e){if(l===p)throw new Error("Generator is already running");if(l===f){if("throw"===t)throw e;return I()}for(o.method=t,o.arg=e;;){var i=o.delegate;if(i){var n=C(i,o);if(n){if(n===m)continue;return n}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(l===h)throw l=f,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);l=p;var a=d(s,r,o);if("normal"===a.type){if(l=o.done?f:v,a.arg===m)continue;return{value:a.arg,done:o.done}}"throw"===a.type&&(l=f,o.method="throw",o.arg=a.arg)}}),c}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}s.wrap=r;var h="suspendedStart",v="suspendedYield",p="executing",f="completed",m={};function _(){}function o(){}function u(){}var g={};g[a]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(S([])));b&&b!==t&&c.call(b,a)&&(g=b);var y=u.prototype=_.prototype=Object.create(g);function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(l){var e;this._invoke=function(i,n){function t(){return new Promise(function(t,e){!function e(t,i,n,a){var s=d(l[t],l,i);if("throw"!==s.type){var r=s.arg,o=r.value;return o&&"object"==typeof o&&c.call(o,"__await")?Promise.resolve(o.__await).then(function(t){e("next",t,n,a)},function(t){e("throw",t,n,a)}):Promise.resolve(o).then(function(t){r.value=t,n(r)},function(t){return e("throw",t,n,a)})}a(s.arg)}(i,n,t,e)})}return e=e?e.then(t,t):t()}}function C(t,e){var i=t.iterator[e.method];if(i===l){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=l,C(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=d(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,m;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=l),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(z,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(c.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=l,t.done=!0,t};return n.next=n}}return{next:I}}function I(){return{value:l,done:!0}}return o.prototype=y.constructor=u,u.constructor=o,u[n]=o.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,n in t||(t[n]="GeneratorFunction")),t.prototype=Object.create(y),t},s.awrap=function(t){return{__await:t}},k(x.prototype),x.prototype[i]=function(){return this},s.AsyncIterator=x,s.async=function(t,e,i,n){var a=new x(r(t,e,i,n));return s.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},k(y),y[n]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(i){var n=[];for(var t in i)n.push(t);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in i)return t.value=e,t.done=!1,t}return t.done=!0,t}},s.values=S,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach($),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var n=this;function t(t,e){return s.type="throw",s.arg=i,n.next=t,e&&(n.method="next",n.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var a=this.tryEntries[e],s=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var r=c.call(a,"catchLoc"),o=c.call(a,"finallyLoc");if(r&&o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(r){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),$(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var a=n.arg;$(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:S(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=l),m}},s}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},,,function(t,e,i){"use strict";i.r(e);function n(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isInit?i("z-row",{attrs:{gutter:20}},e._l(e.data,function(t){return i("Quadrant",{key:t.tag,attrs:{height:e.height,data:t,now:e.now}})}),1):e._e()}function a(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-col",{class:e.data.tag,attrs:{span:12}},[i("Title",{attrs:{quadrant:e.data.tag,name:e.data.title},on:{finish:e.unshift}}),e._v(" "),i("z-scrollbar",{staticClass:"block",attrs:{height:e.height,"data-id":e.data.tag}},[i("z-draggable",{attrs:{list:e.data.sons,group:"things"},on:{add:e.add,end:e.end}},e._l(e.data.sons,function(t){return i("Thing",{key:t._id,attrs:{data:t,now:e.now}})}),1),e._v(" "),e.data.sons&&0!==e.data.sons.length?e._e():i("div",{staticClass:"empty"},[e._v("\u606d\u559c\u4f60\uff01\u5df2\u5b8c\u6210\u4e86\u6240\u6709\u5f85\u529e")])],1)],1)}function s(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header z-row"},[i("div",{staticClass:"z-col"},[i("i",{staticClass:"ft icon flag"},[e._v("\ue753")]),e._v(e._s(e.name)+"\n    ")]),e._v(" "),i("div",{staticClass:"z-1",class:{active:e.active}},[i("label",{on:{click:function(t){return e.show(1)}}},[i("z-input",{attrs:{type:"text",maxlength:"200",width:"100%",placeholder:"\u8bf7\u5728\u8fd9\u91cc\u8f93\u5165\u9700\u8981\u5904\u7406\u7684\u4e8b\u9879"},nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),e._v(" "),i("i",{staticClass:"ft icon close",on:{click:function(t){return e.show(0)}}})])])}s._withStripped=a._withStripped=n._withStripped=!0;var r={props:["quadrant","name","todoList"],data:function(){return{text:"",isBlur:!0,active:!1}},methods:{hide:function(){this.active=!1},show:function(t){this.active=0!==t||!this.active,this.active&&this.$nextTick(function(){this.$el.querySelector("input").focus()})},keyup:function(t){t.stopPropagation(),t.preventDefault();var e=t.keyCode;if(27===e)return this.hide();if(13===e){var i={},n=this.text;n&&(i.title=n,i.quadrant=this.quadrant,$.post(i,"/thing/put.do",function(t){var e=t.data;e.status=parseInt(t.data),this.$emit("finish",e),this.text=""},this))}}}},o=i(0),l=Object(o.a)(r,s,[],!1,null,null,null);l.options.__file="todo/title.vue";function c(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:2!==e.data.status,expression:"data.status !== 2"}],staticClass:"k-thing",class:{finish:e.data.status},attrs:{"data-id":e.data._id},on:{dblclick:e.dblclick,click:e.detail}},[i("label",{attrs:{"data-id":e.data._id},on:{click:function(t){return t.stopPropagation(),e.doFinish(t)}}},[i("i",{staticClass:"ft icon"})]),e._v(" "),i("div",[e.overtime?i("i",{staticClass:"ft bold red"},[e._v("!")]):e._e(),e._v(e._s(e.data.title))])])}var u=l.exports;c._withStripped=!0;var d={props:["data","now"],computed:{current:function(){if(this.now)return this.now;var t=new Date;return parseInt(t.getTime()/1e3)},overtime:function(){var t=this.data;return 0===t.status&&t.end&&t.end<this.current}},methods:{doFinish:function(t){var i,e="finish",n=this.data,a=n._id,s=zen.user.uid,r=$(t.currentTarget).parent();if(s!==n.owner)return $.notice("\u53ea\u6709\u8d1f\u8d23\u4eba\u624d\u80fd\u70b9\u51fb\u5b8c\u6210","error");i=r.hasClass(e)?(r.removeClass(e),0):(r.addClass(e),1);var o={_id:a,status:i,projectId:n.projectId};$.post(o,"/thing/patch.do",function(){n.status=i;var t=this.$parent;t.sort&&t.sort(a,i);var e=i?"\u5b8c\u6210\u4e86\u4efb\u52a1":"\u53d6\u6d88\u4e86\u5b8c\u6210";$.post({thingId:a,content:e},"/put/thingLog.json",function(t){})},this)},detail:function(){$.emit("thingDetail",this.data._id)},dblclick:function(t){t.preventDefault(),t.stopPropagation()}}},h=Object(o.a)(d,c,[],!1,null,null,null);h.options.__file="todo/thing.vue";var v=h.exports,p=function(t,e,i){for(var n=null,a=0;a<i.length;a++)if(i[a]._id===t){n=i.splice(a,1);break}if(null!=n){if(n=n[0],0===e)return i.unshift(n);for(var s=i.length-1;0<=s;s--)if(0===i[s].status)return void i.splice(s+1,0,n);i.unshift(n)}},f={props:["data","now","height"],components:{Title:u,Thing:v},data:function(){return{currentId:""}},methods:{add:function(t){t.pullMode&&this.drag(t)},end:function(t){t.pullMode||t.newIndex===t.oldIndex||this.drag(t)},drag:function(t){var e=t.newIndex,i={_id:this.data.sons[e]._id,quadrant:this.data.tag};if(0===e)if(1===this.data.sons.length)i.order=1e5;else{var n=this.data.sons[e+1];i.order=n.order-500}else if(e===this.data.length){var a=this.data.sons[e-1];i.order=a.order+500}else{var s=this.data.sons[e+1],r=this.data.sons[e-1];i.order=parseInt((s.order+r.order)/2)}$.post(i,"/thing/patch.do",function(t){},this)},unshift:function(t){this.data.sons.unshift(t)},sort:function(t,e){p(t,e,this.data.sons)}}},m=Object(o.a)(f,a,[],!1,null,null,null);m.options.__file="todo/quadrant.vue";var _={props:["things"],data:function(){return{data:[{tag:"a",title:"\u91cd\u8981\u4e14\u7d27\u6025",sons:[]},{tag:"b",title:"\u91cd\u8981\u4e0d\u7d27\u6025",sons:[]},{tag:"c",title:"\u7d27\u6025\u4e0d\u91cd\u8981",sons:[]},{tag:"d",title:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025",sons:[]}],now:0,height:200,isInit:!1}},components:{Quadrant:m.exports},created:function(){var t=new Date;if(this.now=parseInt(t.getTime()/1e3),this.resize(),$.on("thingUpdate",this.thingChange),window.addEventListener("resize",this.resize),this.things&&0!==this.things.length)for(var e,i,n=0,a=this.things;n<a.length;n++)e=a[n],(i=this.getQuadrant(e.quadrant))&&i.sons.push(e)},beforeDestroy:function(){$.off("thingUpdate"),window.removeEventListener("resize",this.resize)},methods:{thingChange:function(t,e){var i=this.getQuadrant(t.quadrant);if(i){var n=i.sons;if("add"===e)return n.unshift(t);for(var a=0;a<n.length;a++)if(n[a]._id===t._id)return void("remove"===e?n.splice(a,1):n[a][e]=t[e])}},resize:function(){var t=parseInt(($("body").height()-180)/2);t>this.height&&(this.height=t),this.isInit=!0},getQuadrant:function(t){for(var e,i=0;i<4;i++)if((e=this.data[i]).tag===t)return e;return null}}},g=Object(o.a)(_,n,[],!1,null,null,null);g.options.__file="todo/index.vue";function w(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShow&&e.item?i("z-dialog",{staticClass:"k-thing-detail-bg",attrs:{top:"5vh",width:"800px",visible:""},on:{close:e.close}},[i("z-row",{attrs:{gutter:18}},[i("z-col",{attrs:{span:20}},[i("Header",{attrs:{readonly:!!e.archiveId},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}}),e._v(" "),i("Describe",{attrs:{readonly:!!e.archiveId},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}}),e._v(" "),i("div",{staticClass:"infos"},[e.item.end?i("dl",{staticClass:"z-left"},[i("dt",[i("i",{staticClass:"ft icon h1"},[e._v("\ue706")]),e._v("\u8ba1\u5212\u65f6\u95f4\uff1a\n                    ")]),e._v(" "),i("dd",[i("z-idate",{attrs:{value:e.item.start}}),e._v("\n                        \u81f3\n                        "),i("z-idate",{attrs:{value:e.item.end}}),e._v(" "),e.overtime?i("span",{staticClass:"ft red"},[e._v("\xa0(\u5df2\u8d85\u65f6)")]):e._e()],1)]):e._e(),e._v(" "),i("Owner"),e._v(" "),i("Watcher"),e._v(" "),i("dl",{staticClass:"z-left"},[i("dt",[i("i",{staticClass:"ft icon h1"},[e._v("\ue725")]),e._v("\u4f18\u5148\u7ea7\uff1a")]),e._v(" "),i("dd",[i("z-tcode",{attrs:{code:"priority",value:e.item.quadrant}})],1)]),e._v(" "),i("dl",{staticClass:"z-left"},[i("dt",[i("i",{staticClass:"ft icon h1"},[e._v("\ue6af")]),e._v("\u72b6\u6001\uff1a")]),e._v(" "),i("dd",[i("k-thing-status",{attrs:{value:e.item}})],1)])],1),e._v(" "),i("Attach"),e._v(" "),i("SubTodo",{attrs:{archiveId:e.archiveId},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}}),e._v(" "),i("Comment")],1),e._v(" "),i("z-col",{attrs:{span:4}},[e.item?i("Actions",{attrs:{archiveId:e.archiveId}}):e._e()],1)],1)],1):e._e()}function b(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"k-thing-comment"},[i("z-row",[i("z-col",{attrs:{span:1}},[i("span",{staticClass:"ft icon h1"},[e._v("\ue753")])]),e._v(" "),i("z-col",{attrs:{span:23}},[i("div",{staticClass:"title"},[i("strong",{staticClass:"ft hover",on:{click:function(t){e.isLog=!1}}},[e._v("\u8bc4\u8bba")]),e._v(" "),i("strong",{staticClass:"ft hover",class:{active:e.isLog},on:{click:function(t){e.isLog=!0}}},[e._v("\u64cd\u4f5c\u8bb0\u5f55")])])])],1),e._v(" "),i("List",{directives:[{name:"show",rawName:"v-show",value:!e.isLog,expression:"!isLog"}]}),e._v(" "),e.isLog?i("Log"):e._e()],1)}function y(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",[0===n.comments.length?a("div",{staticClass:"empty"},[a("i",{staticClass:"ft icon h1"},[n._v("\ue78f")]),n._v("\u6682\u65e0\u8bc4\u8bba\n    ")]):n._e(),n._v(" "),n._l(n.comments,function(e,i){return a("z-row",{key:e._id,staticClass:"content"},[a("z-col",{attrs:{span:2}},[a("z-avatar",{staticClass:"avator",attrs:{uid:e.uid}})],1),n._v(" "),a("z-col",{attrs:{span:22}},[a("z-row",{staticClass:"info"},[a("z-col",{attrs:{span:18}},[a("z-nick",{staticClass:"nick",attrs:{uid:e.uid}}),n._v("\n                    "+n._s(n._f("idate")(e._id))+"\n                ")],1),n._v(" "),a("z-col",{attrs:{span:6}},[n.isOnwer||e.uid==e.uid?a("z-confirm",{staticClass:"ft red hover",attrs:{tip:"\u786e\u5b9a\u5220\u9664\u5417\uff1f"},on:{click:function(t){return n.remove(e._id,i)}}},[n._v("\u5220\u9664\n                    ")]):n._e()],1)],1),n._v("\n            "+n._s(e.content)+"\n        ")],1)],1)}),n._v(" "),a("div",{staticClass:"post"},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.text,expression:"text"}],staticClass:"input",attrs:{placeholder:"\u6309\u56de\u8f66\u5065\u53d1\u9001\u8bc4\u8bba",type:"text"},domProps:{value:n.text},on:{keyup:function(t){return!t.type.indexOf("key")&&n._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.submit(t)},input:function(t){t.target.composing||(n.text=t.target.value)}}})])],2)}var k=g.exports;y._withStripped=b._withStripped=w._withStripped=!0;var x={data:function(){return{comments:[],text:"",isOnwer:!1,thingId:""}},inject:["log","getThing"],mounted:function(){var t=this.getThing();this.isOnwer=t.owner===zen.user.id,this.thingId=t._id,$.post({targetId:this.thingId},"/comment/selectByParent.do",function(t){var e=t.data;e&&(this.comments=e)},this)},methods:{remove:function(t,e){$.post({_id:t,status:0},"/delete/commentDelById.json",function(){this.comments.splice(e,1)},this)},submit:function(){var t=this.text;if(!t)return $.notice("\u8bf7\u8f93\u5165\u8bc4\u8bba\u5185\u5bb9","error");var e={targetId:this.thingId,content:t,status:1};$.post(e,"/put/comment.json",function(t){this.text="",this.comments.unshift(t.data)},this)}}},C=Object(o.a)(x,y,[],!1,null,null,null);C.options.__file="todo/detail/comment/list.vue";function z(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-list",{attrs:{url:"/select/thingLog.json?thingId="+e.thingId,size:10},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"log"},[i("z-nick",{staticClass:"nick",attrs:{uid:t.uid}}),e._v("\n            "+e._s(t.content)+"\n            "),i("div",{staticClass:"time"},[e._v(e._s(e._f("date")(t.addtime)))])],1)]}}])})}var j=C.exports;z._withStripped=!0;var S={inject:["getThing"],data:function(){return{thingId:null}},created:function(){var t=this.getThing();this.thingId=t._id}},I=Object(o.a)(S,z,[],!1,null,null,null);I.options.__file="todo/detail/comment/log.vue";var E={name:"detailComment",props:["value"],components:{List:j,Log:I.exports},data:function(){return{isLog:!1}}},O=Object(o.a)(E,b,[],!1,null,null,null);O.options.__file="todo/detail/comment/index.vue";function T(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"describe"},[i("z-row",[i("z-col",{attrs:{span:1}},[i("i",{staticClass:"ft icon"},[e._v("\ue75e")])]),e._v(" "),i("z-col",{attrs:{span:23}},[i("div",{staticClass:"title"},[i("strong",[e._v("\u63cf\u8ff0")])]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value.content,expression:"value.content"}],attrs:{placeholder:"\u6dfb\u52a0\u8be6\u7ec6\u63cf\u8ff0..."},domProps:{value:e.value.content},on:{change:e.change,input:function(t){t.target.composing||e.$set(e.value,"content",t.target.value)}}})])],1)],1)}var L=O.exports;T._withStripped=!0;var D={name:"detailDescribe",props:["value"],methods:{change:function(){$.post({content:this.value.content,_id:this.value._id},"/thing/patch.do")}}},P=Object(o.a)(D,T,[],!1,null,null,null);P.options.__file="todo/detail/describe.vue";function N(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dl",{staticClass:"z-left"},[t._m(0),t._v(" "),i("dd",{staticClass:"k-todo-owner"},[i("z-nick",{attrs:{uid:t.thing.owner}})],1)])}var M=P.exports;N._withStripped=!0;var A={name:"detailOwner",data:function(){return{thing:null}},inject:["getThing","log"],created:function(){this.thing=this.getThing()}},q=Object(o.a)(A,N,[function(){var t=this.$createElement,e=this._self._c||t;return e("dt",[e("i",{staticClass:"ft icon h2"},[this._v("\ue903")]),this._v("\u8d1f\u8d23\u4eba\uff1a")])}],!1,null,null,null);q.options.__file="todo/detail/owner.vue";function U(){var i=this,t=i.$createElement,n=i._self._c||t;return 0<i.users.length?n("dl",{staticClass:"z-left"},[i._m(0),i._v(" "),n("dd",{staticClass:"k-todo-watcher"},i._l(i.users,function(e){return n("z-tag",{key:e._id,attrs:{size:"small",type:"warning",closable:"",effect:"plain"},on:{close:function(t){return i.remove(e._id)}}},[n("z-nick",{attrs:{uid:e.uid}})],1)}),1)]):i._e()}var Y=q.exports;U._withStripped=!0;var J={name:"detailFollw",data:function(){return{users:[],thingId:null}},inject:["getThing","log"],mounted:function(){$.on("detailWatcher",this.update)},methods:{update:function(t,e){if("new"===e)return this.users=t;if("add"===e)return this.users.push(t);if("remove"===e)for(var i,n=0;n<this.users.length;n++)if((i=this.users[n])._id===t||i.uid===t){this.users.splice(n,1);break}},remove:function(t){var e=this;return $.confirm("\u786e\u5b9a\u5220\u9664\uff1f",function(){$.post({_id:t},"/delete/thingWatcher.json",function(){e.update(t,"remove")})}),!0}}},H=Object(o.a)(J,U,[function(){var t=this.$createElement,e=this._self._c||t;return e("dt",[e("i",{staticClass:"ft icon h2"},[this._v("\ue90d")]),this._v("\u5173\u6ce8\u7684\u4eba\uff1a")])}],!1,null,null,null);H.options.__file="todo/detail/watcher.vue";function W(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"k-todo-tag"},[n("label",{on:{click:i.show}},[i._v("\u5f85\u6dfb\u52a0")]),i._v(" "),i.isShow&&i.isEdit?n("div",{staticClass:"tags"},[n("input",{directives:[{name:"model",rawName:"v-model",value:i.newText,expression:"newText"}],attrs:{type:"text",placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d\u79f0"},domProps:{value:i.newText},on:{input:function(t){t.target.composing||(i.newText=t.target.value)}}}),i._v(" "),n("div",{staticClass:"tag"},i._l(i.colors,function(t,e){return n("span",{style:"background:"+t,on:{click:function(t){return i.selectColor(e)}}},[i.newColor===e?n("i",{staticClass:"ft icon"},[i._v("\ue5ca")]):i._e()])}),0),i._v(" "),n("div",{staticClass:"operator"},[n("span",{staticClass:"z-button small",on:{click:i.cancel}},[i._v("\u53d6\u6d88")]),i._v(" "),n("span",{staticClass:"z-button primary small",on:{click:i.newTag}},[i._v("\u786e\u5b9a")])])]):i._e(),i._v(" "),i.isShow&&!i.isEdit?n("div",{staticClass:"tags"},[n("div",{staticClass:"tag"},i._l(i.tags,function(t,e){return n("span",{style:"background:"+t.color,on:{click:function(t){return i.selectTag(e)}}},[i._v(i._s(t.text))])}),0),i._v(" "),n("div",{staticClass:"operator"},[n("span",{staticClass:"z-button small",on:{click:i.editModal}},[i._v("\u65b0\u589e")]),i._v(" "),n("span",{staticClass:"z-button small",on:{click:i.close}},[i._v("\u53d6\u6d88")]),i._v(" "),n("span",{staticClass:"z-button small primary",on:{click:i.addTag}},[i._v("\u786e\u5b9a")])])]):i._e()])}var R=H.exports;W._withStripped=!0;var F=["#56baff","#d6337d","#62B0FF","#cf0606","#ff7a7a","#764df8","#6bc859","#9a7aff","#388bdd","#ffca65","#e17aff","#7B8F18"],G={name:"detailTag",props:["value"],data:function(){return{isShow:!1,isEdit:!1,newText:"",newColor:0,selected:[],tags:[],colors:[]}},created:function(){this.colors=F},methods:{close:function(){this.isShow=!1},addTag:function(){},newTag:function(){if(!this.newText)return alert("\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a");var t={text:this.newText,color:this.colors[this.newColor]};this.tags.push(t),this.newText="",this.cancel()},cancel:function(){this.isEdit=!1},editModal:function(){this.isEdit=!0},selectTag:function(){},show:function(){this.isShow=!0,0===this.tags.length&&(this.isEdit=!0)},selectColor:function(t){this.newColor=t}}},V=Object(o.a)(G,W,[],!1,null,null,null);V.options.__file="todo/detail/tag.vue";function B(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-row",{staticClass:"header"},[i("z-col",{attrs:{span:1}},[i("i",{staticClass:"ft icon h1"},[e._v("\ue740")])]),e._v(" "),i("z-col",{attrs:{span:23}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value.title,expression:"value.title"}],attrs:{disabled:e.readonly,type:"text",maxlength:"60"},domProps:{value:e.value.title},on:{change:e.change,input:function(t){t.target.composing||e.$set(e.value,"title",t.target.value)}}}),e._v(" "),i("div",{staticClass:"time"},[i("z-nick",{attrs:{uid:e.value.uid}}),e._v("\n            \u521b\u5efa\u4e8e\uff1a\n            "),i("z-idate",{attrs:{value:e.value._id}})],1)])],1)}var Q=V.exports;B._withStripped=!0;var K={name:"detailHeader",props:["value","readonly"],methods:{change:function(){$.post({title:this.value.title,_id:this.value._id},"/thing/patch.do",function(t){$.emit("thingUpdate",this.value,"title")},this)}}},X=Object(o.a)(K,B,[],!1,null,null,null);X.options.__file="todo/detail/header.vue";function Z(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-row",{staticClass:"z-row k-todo-list"},[n("z-col",{attrs:{span:1}},[n("span",{staticClass:"ft icon h2"},[i._v("\ue819")])]),i._v(" "),n("z-col",{attrs:{span:23}},[n("div",{staticClass:"title"},[n("strong",[i._v("\u5b50\u4efb\u52a1\u5217\u8868")]),i._v(" "),i.archiveId?i._e():n("z-button",{staticClass:"right",attrs:{size:"mini",type:"primary"},on:{click:i.add}},[i._v("\u6dfb\u52a0\u5b50\u4efb\u52a1")])],1),i._v(" "),i.list&&0<i.list.length?n("z-progress",{attrs:{percentage:i.percent,color:"#67c23a"}}):n("div",{staticClass:"empty"},[i._v("\u6682\u65e0\u5b50\u4efb\u52a1")]),i._v(" "),i._l(i.list,function(t,e){return n("TodoItem",{key:t._id,attrs:{value:t},on:{remove:function(t){return i.remove(e)}}})}),i._v(" "),i.visible?n("Editor",{attrs:{list:i.list},model:{value:i.visible,callback:function(t){i.visible=t},expression:"visible"}}):i._e()],2)],1)}function tt(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"k-todo-item",class:{finished:!!e.item.status,active:e.active}},[i("i",{staticClass:"ft icon status hover",on:{click:e.finish}}),e._v(" "),i("div",{staticClass:"content",on:{click:e.show}},[e.value.owner&&"0"!==e.value.owner?i("z-avatar",{attrs:{size:"small",uid:e.value.owner}}):e._e(),e._v("\n        "+e._s(e.item.title)+"\n    ")],1),e._v(" "),i("div",{staticClass:"right"},[i("Owner",{attrs:{value:e.value}},[i("i",{staticClass:"ft hover icon"},[e._v("\ue903")])]),e._v(" "),i("Plan",{attrs:{value:e.value}}),e._v(" "),i("z-confirm",{attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u5417"},on:{click:e.remove}},[i("i",{staticClass:"ft icon hover remove"},[e._v("\ue6c2")])])],1),e._v(" "),e.visible?i("Editor",{attrs:{todo:e.item},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}):e._e()],1)}function et(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-popover",{model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-date",{attrs:{type:"datetimerange","range-separator":"\u81f3","start-placeholder":"\u5f00\u59cb\u65e5\u671f","end-placeholder":"\u7ed3\u675f\u65e5\u671f","default-time":["9:00:00","12:00:00"],value:e.text,clearable:!1},on:{confirm:e.submit}}),e._v(" "),i("template",{slot:"reference"},[i("span",{staticClass:"ft hover icon"},[e._v("\ue6dd")])])],2)}var it=X.exports;et._withStripped=tt._withStripped=Z._withStripped=!0;var nt={props:["value"],data:function(){return{text:[],visible:!1}},inject:["log"],created:function(){var t=this.value;this.text.push($.date(t.start)),t.end&&this.text.push($.date(t.end))},watch:{visible:function(t){this.$parent.active=t}},methods:{close:function(){this.visible=!1},submit:function(t){var e=this,i=this.value,n=new Date(t[0]).getTime()/1e3,a=new Date(t[1]).getTime()/1e3;$.post({_id:i._id,start:n,end:a},"/thing/patch.do",function(t){i.end=a,i.start=n,e.visible=!1,e.log("\u5c06\u3010"+i.title+"\u3011\u65f6\u95f4\u8c03\u6574\u4e3a:"+$.date(n)+"\u81f3"+$.date(a))},this)}}},at=Object(o.a)(nt,et,[],!1,null,null,null);at.options.__file="todo/detail/subTodo/plan.vue";function st(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-popover",{attrs:{trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-employee",{attrs:{max:1,placeholder:"\u8f93\u5165\u8d1f\u8d23\u4eba\u5173\u952e\u5b57\u641c\u7d22"},on:{input:e.change}}),e._v(" "),i("div",{staticClass:"k-detail-operator"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:e.close}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("\u786e\u5b9a")])],1),e._v(" "),i("template",{slot:"reference"},[i("span",{staticClass:"ft hover icon"},[e._v("\ue903")])])],2)}var rt=at.exports;st._withStripped=!0;var ot={props:["value"],inject:["log"],data:function(){return{visible:!1,nick:null,owner:null}},created:function(){this.owner=this.value.owner},watch:{visible:function(t){this.$parent.active=t}},methods:{close:function(){this.visible=!1},change:function(t,e){this.owner=t,e&&(this.nick=e.text)},submit:function(){var t=this,e=this.value;if(e.owner===this.owner)return $.notice("\u4e0d\u80fd\u8f6c\u7ed9\u540c\u4e00\u4e2a\u4eba","error");$.post({_id:e._id,owner:this.owner},"/thing/patch.do",function(){e.owner=t.owner,$.emit("thingUpdate",e,"owner"),t.nick&&t.log("\u628a\u8d1f\u8d23\u4eba\u6539\u4e3a"+t.nick),t.close()},this)}}},lt=Object(o.a)(ot,st,[],!1,null,null,null);lt.options.__file="todo/detail/subTodo/owner.vue";function ct(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"todo-editor"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.item.title,expression:"item.title"}],staticClass:"input",attrs:{type:"text",autofocus:"",maxlength:"90",placeholder:"\u6309\u56de\u8f66\u952e\uff0c\u6dfb\u52a0\u5b50\u4efb\u52a1"},domProps:{value:e.item.title},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.stopPropagation(),e.hide(t))},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)},input:function(t){t.target.composing||e.$set(e.item,"title",t.target.value)}}}),e._v(" "),i("div",[i("z-button",{attrs:{type:"success",size:"mini"},on:{click:e.submit}},[e._v("\u4fdd\u5b58")]),e._v(" "),i("z-button",{attrs:{type:"info",size:"mini"},on:{click:e.hide}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-popover",{scopedSlots:e._u([{key:"reference",fn:function(){},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-employee",{attrs:{value:e.owner,max:1}}),e._v(" "),i("div",{staticClass:"operator"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:e.close}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:e.setOwner}},[e._v("\u786e\u5b9a")])],1)],1)],1)])}var ut=lt.exports;ct._withStripped=!0;var dt={props:["value","todo","list"],data:function(){return{owner:null,item:{title:""},visible:!1}},inject:["getThing","log"],mounted:function(){this.todo&&(this.item=this.todo),this.$nextTick(function(){$(".input",this.$el).el[0].focus()})},methods:{submit:function(){var e=this;if(this.item.title){var i={title:this.item.title};if(this.item._id)i._id=this.item._id,$.post(i,"/thing/patch.do",function(t){e.todo.title=i.title,e.hide()},this);else{var t=this.getThing();i.parentId=t._id,i.status=0,i.owner=0,t.projectId&&(i.projectId=t.projectId),$.post(i,"/thing/put.do",function(t){i._id=t.data._id,e.list.push(i),e.log("\u6dfb\u52a0\u4e86\u5b50\u4efb\u52a1:",e.item.title),e.item.title=""},this)}}},setOwner:function(){},hide:function(){this.$emit("input",!1)},close:function(){this.visible=!1}}},ht=Object(o.a)(dt,ct,[],!1,null,null,null);ht.options.__file="todo/detail/subTodo/editor.vue";var vt=ht.exports,pt={props:["value","index"],inject:["log"],components:{Editor:vt,Owner:ut,Plan:rt},data:function(){return{visible:!1,item:null,active:!1}},created:function(){this.item=this.value},methods:{remove:function(){var e=this;$.post({_id:this.item._id},"/thing/remove.do",function(t){e.$emit("remove"),e.log("\u79fb\u9664\u4e86\u5b50\u4efb\u52a1:"+e.item.title)},this)},finish:function(){var i=this,n=0===this.item.status?1:0;$.post({_id:this.item._id,status:n},"/thing/patch.do",function(t){var e=0==(i.item.status=n)?"\u53d6\u6d88\u5b8c\u6210":"\u5b8c\u6210\u4e86";i.log(e+"\u5b50\u4efb\u52a1:"+i.item.title)},this)},show:function(){this.visible=!0}}},ft=Object(o.a)(pt,tt,[],!1,null,null,null);ft.options.__file="todo/detail/subTodo/todoItem.vue";var mt={data:function(){return{visible:!1,list:[]}},components:{TodoItem:ft.exports,Editor:vt},props:["value","archiveId"],created:function(){this.getList()},computed:{percent:function(){var t=this.list.length,e=0;return this.list.forEach(function(t){return t.status&&e++}),0===t?0:e=parseInt(e/t*100)}},methods:{getList:function(){var e=this;$.post({parentId:this.value._id},"/select/thingByParentId.json",function(t){e.list=t.data},this)},add:function(){this.visible=!0},remove:function(t){this.list.splice(t,1)}}},_t=Object(o.a)(mt,Z,[],!1,null,null,null);_t.options.__file="todo/detail/subTodo/index.vue";function gt(){var n=this,t=n.$createElement,a=n._self._c||t;return 0!==n.files.length?a("z-row",{staticClass:"z-row k-files-list"},[a("z-col",{attrs:{span:1}},[a("span",{staticClass:"ft icon h2"},[n._v("\ue8b9")])]),n._v(" "),a("z-col",{attrs:{span:23}},[a("div",{staticClass:"title"},[a("strong",[n._v("\u9644\u4ef6")]),n._v(" "),a("label",{staticClass:"right",attrs:{for:"J_attach_file"}},[a("span",{staticClass:"el-button el-button--primary el-button--mini"},[n._v("\u6dfb\u52a0\u9644\u4ef6")])])]),n._v(" "),n._l(n.files,function(e,i){return a("div",{staticClass:"item-file z-row"},[a("div",{staticClass:"z-6 left-txt"},[n._v(n._s(e.title.substring(e.title.length-3,e.title.length)))]),n._v(" "),a("div",{staticClass:"z-16 right-content"},[a("a",{attrs:{href:e.url,target:"_blank"}},[a("p",{staticClass:"title"},[n._v(n._s(e.title))]),n._v(" "),a("z-idate",{attrs:{value:e.addtime}})],1),n._v(" "),a("z-confirm",{staticClass:"z-link remove",attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u8be5\u9644\u4ef6\u5417\uff1f"},on:{click:function(t){return n.del(e._id,e.title,i)}}},[n._v("\u5220\u9664\n                ")])],1)])})],2)],1):n._e()}var wt=_t.exports;gt._withStripped=!0;var bt={name:"detailAttach",data:function(){return{files:[],itemId:null}},inject:["log","getThing"],created:function(){var t=this.getThing();this.itemId=t._id,$.on("uploadAttach",this.upload),this.load(),document.addEventListener("paste",this.pasteImage)},beforeDestroy:function(){document.removeEventListener("paste",this.pasteImage),$.off("uploadAttach")},methods:{pasteImage:function(t){var e=t.clipboardData||t.originalEvent.clipboardData;if(e&&e.items){var i=e.items[0];if(new RegExp(/image\/.*/).test(i.type)){t.preventDefault();var n=i.getAsFile();this.upload(n)}}},load:function(){var e=this;$.post({parentId:this.itemId},"/select/attachByParentId.json",function(t){e.files=t.data},this)},del:function(t,e,i){var n=this;$.post({_id:t},"/delete/attach.json",function(t){n.files.splice(i,1),n.log("\u5220\u9664\u4e86\u9644\u4ef6 "+e)})},upload:function(t){var e=this,i=new FormData;i.append("file",t),i.append("parentId",this.itemId),i.append("app",zen.name),$.upload(i,"/upload/file.do",function(t){e.files.push(t),$.post({parentId:e.itemId,url:t.url,size:t.size,title:t.title},"/put/attach.json"),e.log("\u6dfb\u52a0\u4e86\u9644\u4ef6 "+t.name)},this)}}},yt=Object(o.a)(bt,gt,[],!1,null,null,null);yt.options.__file="todo/detail/attach.vue";function kt(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"btn",attrs:{for:"J_attach_file"}},[i("i",{staticClass:"ft icon"},[t._v("\ue701")]),t._v("\u9644\u4ef6\n    "),i("input",{staticClass:"hide",attrs:{id:"J_attach_file",type:"file",name:"file"},on:{change:t.change}})])}var xt=yt.exports;kt._withStripped=!0;var Ct=i(1),zt=i.n(Ct),$t=i(2),jt=i.n($t),St={name:"detailAttachAction",methods:{change:function(e){return jt()(zt.a.mark(function t(){return zt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:$.emit("uploadAttach",e.target.files[0]);case 1:case"end":return t.stop()}},t)}))()}}},It=Object(o.a)(St,kt,[],!1,null,null,null);It.options.__file="todo/detail/actions/attach.vue";function Et(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"btn",on:{click:e.trigger}},[i("i",{staticClass:"ft icon"},[e._v("\ue764")]),e._v(e._s(e.text)+"\n    "),i("z-popover",{model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-employee",{attrs:{max:1},model:{value:e.people,callback:function(t){e.people=t},expression:"people"}}),e._v(" "),i("div",{staticClass:"k-detail-operator"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.close(t)}}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return t.stopPropagation(),e.submit(t)}}},[e._v("\u786e\u5b9a")])],1)],1)],1)}var Ot=It.exports;Et._withStripped=!0;var Tt={data:function(){return{thingId:null,isOnwer:!1,hasWatch:!1,people:null,visible:!1}},inject:["getThing"],computed:{text:function(){return this.isOnwer?"\u5173\u6ce8\u4eba":this.hasWatch?"\u53d6\u6d88\u5173\u6ce8":"\u5173\u6ce8\u8be5\u4efb\u52a1"}},created:function(){var t=this.getThing(),n=zen.user.uid;this.thingId=t._id,t.owner===n&&(this.isOnwer=!0),$.get({thingId:this.thingId},"/select/thingWatcherByThing.json",function(t){var e=this,i=t.data;i&&0!==i.length&&(i.forEach(function(t){return t.uid===n&&(e.hasWatch=!0)}),$.emit("detailWatcher",i,"new"))},this)},methods:{trigger:function(){if(this.isOnwer)return this.visible=!0;var t=zen.user.uid;if(this.hasWatch)return $.post({thingId:this.thingId,uid:t},"/delete/thingWatcherUid.json",function(){this.hasWatch=!1,$.emit("detailWatcher",t,"remove")},this);this.people=t,this.submit(),this.hasWatch=!0},close:function(){this.visible=!1},submit:function(){if(!this.people)return this.close();$.post({thingId:this.thingId,uid:this.people},"/thing/addWatcher.do",function(t){t.data&&$.emit("detailWatcher",t.data,"add"),this.close()},this)}}},Lt=Object(o.a)(Tt,Et,[],!1,null,null,null);Lt.options.__file="todo/detail/actions/watcher.vue";function Dt(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-popover",{attrs:{trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-employee",{attrs:{max:1,placeholder:"\u8f93\u5165\u8d1f\u8d23\u4eba\u5173\u952e\u5b57\u641c\u7d22"},on:{input:e.change}}),e._v(" "),i("div",{staticClass:"k-detail-operator"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:e.close}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("\u786e\u5b9a")])],1),e._v(" "),i("template",{slot:"reference"},[i("div",{staticClass:"btn"},[i("i",{staticClass:"ft icon"},[e._v("\ue6fd")]),e._v("\u8d1f\u8d23\u4eba\n        ")])])],2)}var Pt=Lt.exports;Dt._withStripped=!0;var Nt={data:function(){return{owner:null,nick:null,visible:!1}},inject:["getThing","log"],methods:{close:function(){this.visible=!1},change:function(t,e){this.owner=t,e&&(this.nick=e.text)},submit:function(){var t=this,e=this.getThing();if(e.owner===this.owner)return $.notice("\u4e0d\u80fd\u8f6c\u7ed9\u540c\u4e00\u4e2a\u4eba","error");$.post({_id:e._id,owner:this.owner},"/thing/patch.do",function(){e.owner=t.owner,$.emit("thingUpdate",e,"owner"),t.nick&&t.log("\u628a\u8d1f\u8d23\u4eba\u6539\u4e3a"+t.nick),t.close()},this)}}},Mt=Object(o.a)(Nt,Dt,[],!1,null,null,null);Mt.options.__file="todo/detail/actions/owner.vue";function At(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-popover",{model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-date",{attrs:{type:"datetimerange","range-separator":"\u81f3","start-placeholder":"\u5f00\u59cb\u65e5\u671f","end-placeholder":"\u7ed3\u675f\u65e5\u671f","default-time":["9:00:00","12:00:00"],value:e.text,clearable:!1},on:{confirm:e.submit}}),e._v(" "),i("template",{slot:"reference"},[i("span",{staticClass:"btn"},[i("i",{staticClass:"ft icon"},[e._v("\ue706")]),e._v("\u8ba1\u5212\u65f6\u95f4\n        ")])])],2)}var qt=Mt.exports;At._withStripped=!0;var Ut={data:function(){return{text:[],visible:!1}},inject:["getThing","log"],created:function(){var t=this.getThing();this.text.push($.date(t.start)),t.end&&this.text.push($.date(t.end))},methods:{close:function(){this.visible=!1},submit:function(t){var e=this,i=this.getThing(),n=new Date(t[0]).getTime()/1e3,a=new Date(t[1]).getTime()/1e3;$.post({_id:i._id,start:n,end:a},"/thing/patch.do",function(t){i.end=a,i.start=n,e.visible=!1,e.log("\u5c06\u8ba1\u5212\u65f6\u95f4\u8c03\u6574\u4e3a "+$.date(n)+"\u81f3"+$.date(a))},this)}}},Yt=Object(o.a)(Ut,At,[],!1,null,null,null);Yt.options.__file="todo/detail/actions/plan.vue";function Jt(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-popover",{attrs:{trigger:"click",width:"150",placement:"top"},model:{value:i.visible,callback:function(t){i.visible=t},expression:"visible"}},[n("ul",{staticClass:"k-quard-list"},i._l(i.priority,function(e,t){return n("li",{key:t,style:{color:e.color},on:{click:function(t){return i.quard(e.type,e.title)}}},[e.type===i.thing.quadrant?n("i",{staticClass:"ft icon"},[i._v("\ue6cb")]):n("i",{staticClass:"ft icon"},[i._v("\ue6d5")]),i._v("\n            "+i._s(e.title)+"\n        ")])}),0),i._v(" "),n("template",{slot:"reference"},[n("div",{staticClass:"btn"},[n("i",{staticClass:"ft icon"},[i._v("\ue7ad")]),i._v("\u4f18\u5148\u7ea7")])])],2)}var Ht=Yt.exports;Jt._withStripped=!0;var Wt={data:function(){return{thing:null,visible:!1,priority:[{title:"\u91cd\u8981\u4e14\u7d27\u6025 (P1)",type:"a",color:"#f80e15"},{title:"\u91cd\u8981\u4e0d\u7d27\u6025 (P2)",type:"b",color:"#BF9F03"},{title:"\u7d27\u6025\u4e0d\u91cd\u8981 (P3)",type:"c",color:"#009fe3"},{title:"\u4e0d\u7d27\u6025\u4e0d\u8981 (P4)",type:"d",color:"#79aa1c"}]}},inject:["getThing","log"],created:function(){this.thing=this.getThing()},methods:{quard:function(t,e){var i=this;this.thing.quadrant=t,$.post({_id:this.thing._id,quadrant:t},"/thing/patch.do",function(t){i.log("\u8bbe\u7f6e\u4e86\u4f18\u5148\u7ea7 "+e)})}}},Rt=Object(o.a)(Wt,Jt,[],!1,null,null,null);Rt.options.__file="todo/detail/actions/priority.vue";function Ft(){var t=this,e=t.$createElement,i=t._self._c||e;return i("z-confirm",{staticClass:"btn remove",attrs:{tip:"\u786e\u5b9a\u5220\u9664\u5417\uff1f"},on:{click:t.remove}},[i("i",{staticClass:"ft icon"},[t._v("\ue6fb")]),t._v(" \u5220\u9664\n")])}var Gt=Rt.exports,Vt={inject:["getThing","log"],data:function(){return{thing:null}},created:function(){this.thing=this.getThing()},render:function(t){var e=t;return this.thing.status?e("div",{class:"btn ft green",on:{click:this.doFinish}},[e("i",{class:"ft icon"},["\ue6d5"]),"\u8bbe\u4e3a\u672a\u5b8c\u6210"]):e("div",{class:"btn",on:{click:this.doFinish}},[e("i",{class:"ft icon"},["\ue6cb"]),"\u6807\u8bb0\u5df2\u5b8c\u6210"])},methods:{doFinish:function(){var t=this,e=this.thing;if(zen.user.uid!==e.owner)return $.notice("\u53ea\u6709\u8d1f\u8d23\u4eba\u624d\u80fd\u70b9\u51fb\u5b8c\u6210","error");var i=e.status?0:1;$.post({status:i,_id:e._id,projectId:e.projectId},"/thing/patch.do",function(){1==(e.status=i)?t.log("\u5b8c\u6210\u4e86\u8fd9\u4e2a\u4efb\u52a1"):t.log("\u91cd\u65b0\u6253\u5f00\u4e86\u8fd9\u4e2a\u4efb\u52a1"),$.emit("thingUpdate",e,"status")},this)}}};Ft._withStripped=!0;var Bt={inject:["getThing","close","log"],methods:{remove:function(){var e=this.getThing();$.post({_id:e._id},"/thing/remove.do",function(t){this.log("\u5220\u9664\u4e86\u4efb\u52a1"),$.emit("thingUpdate",e,"remove"),this.close()},this)}}},Qt=Object(o.a)(Bt,Ft,[],!1,null,null,null);Qt.options.__file="todo/detail/actions/remove.vue";function Kt(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn",on:{click:t.click}},[i("i",{staticClass:"ft icon"},[t._v("\ue85f")]),t._v(t._s(t.title)+"\n")])}var Xt=Qt.exports;Kt._withStripped=!0;var Zt={inject:["getThing","close","log"],props:["target"],data:function(){return{archiveId:null}},computed:{title:function(){return this.archiveId?"\u53d6\u6d88\u5f52\u6863":"\u5f52\u6863"}},created:function(){this.target&&(this.archiveId=this.target)},methods:{click:function(){var t,e=this,i=this.getThing(),n={};t=this.archiveId?(n._id=this.archiveId,"/thing/restore.do"):(n._id=i._id,"/thing/archive.do"),$.post(n,t,function(t){if(e.archiveId)return e.archiveId=null,e.log("\u53d6\u6d88\u4efb\u52a1\u5f52\u6863"),$.emit("thingUpdate",t.data,"add");e.archiveId=t.data._id,e.log("\u5c06\u4efb\u52a1\u5f52\u6863"),$.emit("thingUpdate",i,"remove")},this)}}},te=Object(o.a)(Zt,Kt,[],!1,null,null,null);te.options.__file="todo/detail/actions/archive.vue";var ee=te.exports,ie={props:["quadrant"],provide:function(){return{getThing:this.getThing,close:this.close,log:this.log}},data:function(){return{item:null,isShow:!1,overtime:!1,archiveId:null}},components:{Comment:L,Describe:M,Header:it,Owner:Y,Tag:Q,Watcher:R,SubTodo:wt,Attach:xt,Actions:{name:"actions",props:["archiveId"],render:function(t){var e=t;return this.archiveId?e(ee,{attrs:{target:this.archiveId}}):e("div",[e(Vt),e(Gt),e(qt),e(Ht),e(Ot),e(Pt),e(ee),e(Xt)])}}},created:function(){$.on("thingDetail",this.init)},methods:{getThing:function(){return this.item},init:function(t,n){if(!this.isShow){var e="/get/thingById.json";1===n?(this.archiveId=t,e="/get/archiveById.json"):this.archiveId=null,$.post({_id:t},e,function(t){var e=1===n?JSON.parse(t.data.content):t.data;e.end||(e.end=0),this.item=e,this.isShow=!0;var i=new Date;i=parseInt(i.getTime()/1e3),this.overtime=0===e.status&&e.end&&e.end<i},this)}},log:function(t){$.post({thingId:this.item._id,content:t},"/put/thingLog.json",function(t){})},close:function(){this.isShow=!1}}},ne=Object(o.a)(ie,w,[],!1,null,null,null);ne.options.__file="todo/detail.vue";function ae(){this.$createElement;return this._self._c,this._m(0)}var se=ne.exports;ae._withStripped=!0;function re(t){var e=new Date(1e3*t),i=1900+e.getYear(),n="0"+(e.getMonth()+1),a="0"+e.getDate(),s="0"+e.getHours(),r="0"+e.getMinutes(),o="0"+e.getSeconds();return"00"===s?i+"-"+n.substring(n.length-2,n.length)+"-"+a.substring(a.length-2,a.length):i+"-"+n.substring(n.length-2,n.length)+"-"+a.substring(a.length-2,a.length)+" "+s.substring(s.length-2,s.length)+":"+r.substring(r.length-2,r.length)+":"+o.substring(o.length-2,o.length)}var oe={a:"#f80e15",b:"#d9b403",c:"#009fe3",d:"#79AA1C"};function le(t){var e={id:t._id,title:t.title};return t.quadrant&&(e.color=oe[t.quadrant]),0<t.start&&(e.start=re(t.start)),0<t.end&&(86400<t.end-t.start?e.allDay=!0:t.end>t.start&&(e.end=re(t.end))),e}var ce=function(t){if(!Array.isArray(t))return le(t);for(var e,i=[],n=0;n<t.length;n++)e=le(t[n]),i.push(e);return i},ue=function(t){return oe[t]},de={props:["value"],data:function(){return{calendar:null,currentEvt:null,eventData:{}}},created:function(){$.lib(["calendar/main.min.js","calendar/interaction/min.js","calendar/daygrid/min.js","calendar/timegrid/min.js"],this.init),$.on("thingUpdate",this.update)},methods:{init:function(){var t={plugins:["interaction","dayGrid","timeGrid"],header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek"},locale:"zh-cn",navLinks:!0,timezone:"Asia/Shanghai",fixedWeekCount:!1,aspectRatio:1.8,windowResizeDelay:300,selectable:!0,selectHelper:!0,select:this.add,eventClick:this.detail,eventResize:this.change,eventDrop:this.change,minTime:"06:00:00",maxTime:"23:00:00",scrollTime:"08:00:00",editable:!0,eventLimit:!0,events:[]};t.defaultDate=new Date,t.events=ce(this.value),this.calendar=new FullCalendar.Calendar(document.getElementById("calendar"),t),this.$nextTick(function(){this.calendar.render(),this.calendar.refetchEvents()})},change:function(t){var e={_id:t.event.id,start:t.event.start.getTime()/1e3};t.event.end&&(e.end=t.event.end.getTime()/1e3),$.post(e,"/thing/patch.do",function(t){},this)},update:function(t){if(t.owner!==zen.user.id)return this.remove(t._id);this.calendar.getEventById(t._id).remove();var e={color:ue(t.quadrant),id:t._id,start:1e3*t.start,title:t.title};this.calendar.addEvent(e)},add:function(){},addThing:function(t){if(t){var e=ce(t);this.calendar.addEvent(e)}else this.calendar.unselect()},detail:function(t){this.currentEvt=t,$.emit("thingDetail",t.event.id)},remove:function(t){this.calendar.removeEvents([t])}}},he=Object(o.a)(de,ae,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"k-calendar"},[e("div",{attrs:{id:"calendar"}})])}],!1,null,null,null);he.options.__file="todo/calendar/index.vue";function ve(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-row",{staticClass:"k-doc",attrs:{type:"flex",justify:"space-between"}},[n("z-col",{attrs:{span:4}},[n("h3",[i._v("\n            \u6211\u7684\u77e5\u8bc6\u5e93\n            ")]),i._v(" "),n("z-scrollbar",{attrs:{height:-150}},[n("z-list",{attrs:{url:"/note/my.do",id:"J_docList",callback:i.callback},scopedSlots:i._u([{key:"default",fn:function(e){return[n("div",{key:e._id,staticClass:"doc-item",class:{active:i.current._id===e._id},on:{click:function(t){return i.select(e,t)}}},[i._v(i._s(e.title)+"\n                        "),n("div",{staticClass:"time"},[n("z-idate",{attrs:{value:e._id}}),i._v(" "),n("z-execute",{attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",action:"/note/remove.do?_id="+e._source}},[n("i",{staticClass:"ft icon"},[i._v("\ue8f8")])])],1)])]}}])})],1)],1),i._v(" "),n("z-col",{attrs:{span:20}},[i.content?n("Editor",{attrs:{data:i.current,summary:i.content}}):i._e()],1)],1)}function pe(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"k-repository"},[i("div",{staticClass:"z-row"},[i("div",{staticClass:"z-12 h3"},[t._v("\n                "+t._s(t.data.title)+"\n            ")]),t._v(" "),i("div",{staticClass:"z-12",staticStyle:{"text-align":"right"}},[i("AddDoc",{staticClass:"el-button el-button--small is-plain"},[t._v("\u65b0\u589e\u7ae0\u8282")]),t._v(" "),i("z-link",{attrs:{target:"_blank",type:"button",href:"/view.html?id="+t.data._id,size:"small"}},[t._v("\u67e5\u770b")]),t._v(" "),i("z-wicket",{attrs:{plain:"",action:"/note/patch.do","wicket-size":"small",prop:t.data,view:"J_title",callback:t.changeTitle}},[t._v("\u4fee\u6539\u6807\u9898\n                ")]),t._v(" "),i("Share",{staticClass:"el-button el-button--small is-plain",attrs:{itemId:t.data._id}},[t._v("\u5206\u4eab")]),t._v(" "),i("z-popup",{attrs:{prop:t.data,view:"/doc/config.xhtm"}},[t._v("\n                    \u8bbe\u7f6e\n                ")])],1)]),t._v(" "),i("z-scrollbar",{attrs:{height:-180}},[t.summary&&0!==t.summary.sons.length?t._e():i("div",{staticClass:"empty"},[i("i",{staticClass:"ft icon"},[t._v("\ue718")]),t._v("\u6682\u65e0\u7ae0\u8282")]),t._v(" "),i("Chapter",{key:"root",staticClass:"chapter-list",attrs:{value:t.summary.sons,readonly:t.readonly}})],1)],1),t._v(" "),i("Board",{attrs:{itemId:t.docId,nodes:t.summary.sons}})],1)}function fe(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-draggable",{attrs:{list:i.value,tag:"div",group:"item"},on:{end:i.end}},i._l(i.value,function(e){return n("div",{key:e.id,staticClass:"group"},[n("div",{staticClass:"guide",attrs:{"data-id":e.id}}),i._v(" "),n("div",{staticClass:"item",attrs:{"data-id":e.id}},[n("hr"),i._v(" "),n("div",{staticClass:"header"},[n("Icon",{attrs:{value:e}}),i._v(" "),e.link?n("div",{staticClass:"title",on:{click:function(t){return i.view(e)}}},[i._v("\n                    "+i._s(e.title)+"\n                ")]):n("AddDoc",{staticClass:"title",attrs:{item:e}},[i._v(i._s(e.title))])],1),i._v(" "),n("div",{staticClass:"info"},[n("ChangeTitle",{staticClass:"ft icon hover",attrs:{value:e}},[i._v("\ue88e")]),i._v(" "),n("AddDoc",{staticClass:"ft icon hover",attrs:{parent:e,title:"\u6dfb\u52a0\u5b50\u7ae0\u8282"}},[i._v("\ue8c8")]),i._v(" "),n("z-confirm",{staticClass:"ft icon hover",attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u6587\u6863\u5417"},on:{click:function(t){return i.trigger(e,"remove")}}},[i._v("\n                    \ue8f8\n                ")])],1)]),i._v(" "),!1!==e.status&&e.sons&&0<e.sons.length?n("Chapter",{key:"s"+e.id,attrs:{value:e.sons}}):i._e()],1)}),0)}function me(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip"},["1"===t.number?i("z-tooltip",{attrs:{content:"\u6587\u672c\u6587\u6863"}},[i("i",{staticClass:"doc-icon ft icon"},[t._v("\ue7be")])]):t._e(),t._v(" "),"2"===t.number?i("z-tooltip",{attrs:{content:"\u601d\u7ef4\u5bfc\u56fe"}},[i("i",{staticClass:"doc-icon ft icon"},[t._v("\ue787")])]):t._e(),t._v(" "),"5"===t.number?i("z-tooltip",{attrs:{content:"\u6d41\u7a0b\u56fe"}},[i("i",{staticClass:"doc-icon ft icon"},[t._v("\ue779")])]):t._e(),t._v(" "),"6"===t.number?i("z-tooltip",{attrs:{content:"\u8868\u683c"}},[i("i",{staticClass:"doc-icon ft icon"},[t._v("\ue7ad")])]):t._e(),t._v(" "),"4"===t.number?i("z-tooltip",{attrs:{content:"\u6587\u4ef6\u5939"}},[i("i",{staticClass:"doc-floder ft icon",class:{lap:!t.value.status}})]):t._e(),t._v(" "),t.number?t._e():i("z-tooltip",{attrs:{content:"\u6b64\u6587\u6863\u5c1a\u672a\u521b\u5efa"}},[i("i",{staticClass:"doc-icon ft icon"},[t._v("\ue76e")])])],1)}var _e=he.exports;me._withStripped=fe._withStripped=pe._withStripped=ve._withStripped=!0;var ge={props:["value"],computed:{number:function(){return this.value&&this.value.type?this.value.type+"":""}}},we=Object(o.a)(ge,me,[],!1,null,null,null);we.options.__file="doc/repository/icon.vue";function be(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{on:{click:e.toggle}},[e._t("default"),e._v(" "),e.isShow?i("z-dialog",{attrs:{title:"\u65b0\u5efa\u6587\u6863",width:"540px"},on:{close:e.toggle}},[i("z-form",{attrs:{"label-width":"100px"},nativeOn:{submit:function(t){t.preventDefault()}}},[i("z-field",{attrs:{label:"\u6587\u6863\u6807\u9898"}},[i("z-input",{attrs:{width:"340px",type:"text"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),i("z-field",{attrs:{label:"\u6587\u6863\u7c7b\u578b"}},[i("z-radio",{attrs:{type:"button",data:e.types},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-button",{attrs:{plain:""},on:{click:e.toggle}},[e._v("\u53d6 \u6d88")]),e._v(" "),i("z-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("\u786e \u5b9a")])],1)],1):e._e()],2)}var ye=we.exports;be._withStripped=!0;var ke={props:["parent","item"],data:function(){return{type:1,isShow:!1,title:"",types:[{value:1,text:"\u6587\u672c"},{value:2,text:"\u8111\u56fe"},{value:6,text:"\u8868\u683c"},{value:5,text:"\u6d41\u7a0b\u56fe"},{value:4,text:"\u76ee\u5f55"}]}},inject:["repository"],mounted:function(){this.item&&(this.title=this.item.title)},methods:{add:function(){if(!this.title)return $.notice("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a","error");var i=this.repository,n=i.summary;n.id++;var a={content:"",title:this.title,type:this.type,parentId:i.data._id};$.post(a,"/note/add.do",function(t){var e=t.data;if(this.item)return this.mergeData(this.item,e,n.id),i.save();this.mergeData(a,e,n.id),this.parent?this.parent.sons.push(a):n.sons.push(a),this.title="",i.save()},this)},mergeData:function(t,e,i){t.sons||(t.sons=[]),t.link=e._id,t.id=i,t.type=this.type,4===this.type&&(t.status=!0,t.link="folder"),this.toggle()},toggle:function(){this.isShow=!this.isShow}}},xe=Object(o.a)(ke,be,[],!1,null,null,null);xe.options.__file="doc/repository/addDoc.vue";function Ce(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{on:{click:e.show}},[e._t("default"),e._v(" "),e.visible?i("z-dialog",{attrs:{title:"\u4fee\u6539\u6807\u9898",width:"540px",visible:""},on:{click:e.close}},[i("z-form",{attrs:{"label-width":"100px"}},[i("z-input",{attrs:{label:"\u6587\u6863\u6807\u9898",width:"340px",type:"text",koo:"need"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-button",{on:{click:e.close}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("\u786e\u5b9a")])],1)],1):e._e()],2)}var ze=xe.exports;Ce._withStripped=!0;var $e={props:["value"],data:function(){return{visible:!1,title:null}},created:function(){this.title=this.value.title},methods:{show:function(){this.visible=!0},close:function(){this.visible=!1},update:function(){if(!this.title)return $.notice("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a","error");var t={_id:this.value.link||this.value._id,title:this.title},e={event:"save"};this.value.title=this.title,t._id&&$.post(t,"/note/patch.do",function(t){$.emit("chapterEvt",e),this.close()},this),$.emit("chapterEvt",e)}}},je=Object(o.a)($e,Ce,[],!1,null,null,null);je.options.__file="doc/repository/changeTitle.vue";var Se=je.exports,Ie={name:"Chapter",props:["value","parent"],components:{Icon:ye,ChangeTitle:Se,AddDoc:ze},data:function(){return{title:"",current:null}},methods:{end:function(t){t.newIndex!==t.oldIndex&&this.trigger(null,"save")},view:function(t){return"folder"===t.link?t.status=!t.status:"folder"===t.link?(t.status=!t.status,this.trigger(t.id,"folder")):void this.trigger(t.link,"doc")},trigger:function(t,e){var i={event:e,data:t};$.emit("chapterEvt",i)}}},Ee=Object(o.a)(Ie,fe,[],!1,null,null,null);Ee.options.__file="doc/repository/chapter.vue";function Oe(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShow?i("div",{staticClass:"k-doc-board"},[i("div",{staticClass:"rep-nav"},[i("dl",{staticClass:"z-left"},[i("dd",{staticClass:"active",on:{click:e.close}},[i("i",{staticClass:"ft icon"},[e._v("\ue6f6")])]),e._v(" "),i("dd",{on:{click:e.nav}},[i("z-tooltip",{attrs:{content:"\u77e5\u8bc6\u5e93\u76ee\u5f55"}},[i("i",{staticClass:"ft icon"},[e._v("\ue699")])])],1),e._v(" "),i("dd",[i("z-tooltip",{attrs:{content:"\u5206\u4eab\u6587\u6863"}},[i("Share",{staticClass:"ft icon",attrs:{itemId:e.itemId}},[e._v("\ue8dc")])],1)],1),e._v(" "),i("dd",[i("z-tooltip",{attrs:{content:"\u9884\u89c8\u6587\u6863"}},[i("a",{attrs:{href:"/view.html?id="+e.itemId,target:"_blank"},on:{click:e.debounce.flush}},[i("i",{staticClass:"ft icon"},[e._v("\ue878")])])])],1),e._v(" "),i("dd",[i("History",{attrs:{itemId:e.itemId}})],1),e._v(" "),i("dt",[e._v("\n                "+e._s(e.value.title)+"\n                ")])]),e._v(" "),i("div",{staticClass:"z-noselect"},[e._v(e._s(e.tooltip))])]),e._v(" "),i(e.name,{tag:"component",attrs:{readonly:e.readonly,type:e.value.type},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),e._v(" "),i("div",{staticClass:"doc-nav",class:{show:e.showNav||4===e.value.type}},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.showNav,expression:"showNav"}],staticClass:"ft icon close hover",on:{click:e.nav}},[e._v("\ue710")]),e._v(" "),i("Nav",{attrs:{value:e.nodes,current:e.itemId}})],1)],1):e._e()}function Te(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:!t.readonly,expression:"!readonly"}],staticClass:"k-rich"},[i("z-editor",{attrs:{value:t.value,mode:"full"},on:{input:t.save}})],1)}var Le=Ee.exports;Te._withStripped=Oe._withStripped=!0;var De={props:["readonly","value"],data:function(){return{upload:null}},methods:{save:function(t){$.emit("docContentUpdate",t)}}},Pe=Object(o.a)(De,Te,[],!1,null,null,null);Pe.options.__file="doc/word/index.vue";function Ne(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"k-graph"},[e("iframe",{attrs:{src:"/doc/flow.html"},on:{load:this.sendData}})])}var Me=Pe.exports,Ae={name:"minder",props:["value","readonly"],data:function(){return{isLoaded:!1,key:"t-minder"}},created:function(){Vue.options.components[this.key]&&(this.isLoaded=!0)},render:function(t){var e=t;return this.isLoaded?e("t-minder",{attrs:{value:this.value,readonly:this.readonly},on:{input:this.save}}):(this.load(),null)},methods:{save:function(t){$.emit("docContentUpdate",t)},load:function(){var t=this;$.lib(["naotu.js"],function(){t.isLoaded=!0})}}};Ne._withStripped=!0;var qe={name:"graph",props:["value","type"],watch:{value:function(){this.type+""=="5"&&this.sendData()}},mounted:function(){window.addEventListener("message",function(t){$.emit("docContentUpdate",t.data)},!1)},methods:{sendData:function(){this.$el.getElementsByTagName("iframe")[0].contentWindow.postMessage(this.value,"/")}}},Ue=Object(o.a)(qe,Ne,[],!1,null,null,null);Ue.options.__file="doc/graph/index.vue";function Ye(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",i._l(i.value,function(e){return n("div",{key:"nav"+e.id,staticClass:"chapter"},[n("div",{staticClass:"item",class:{active:e.link===i.current},on:{click:function(t){return i.selected(e)}}},[i._v("\n            "+i._s(e.title)+"\n        ")]),i._v(" "),e.sons&&0<e.sons.length?n("Nav",{attrs:{current:i.current,value:e.sons}}):i._e()],1)}),0)}var Je=Ue.exports,He={name:"excel",props:["readonly","value"],data:function(){return{xs:null}},watch:{value:function(t){this.xs&&this.xs.loadData(JSON.parse(t))}},mounted:function(){if(window.x_spreadsheet)return this.init();var t=this;$.lib(["xspreadsheet/xspreadsheet.js","xspreadsheet/xspreadsheet.css"],function(){x_spreadsheet.locale("zh-cn"),t.init()}),window.addEventListener("keydown",this.keydown)},render:function(t){return t("div")},beforeDestroy:function(){window.removeEventListener("keydown",this.keydown)},methods:{keydown:function(t){83===t.keyCode&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&(t.stopPropagation(),t.preventDefault(),this.xs&&this.save(this.xs.getData()))},init:function(){var e=this,t=this.value,i=window.x_spreadsheet;if(this.xs)return t&&this.xs.loadData(JSON.parse(t));this.xs=i(this.$el,{view:{height:function(){return document.documentElement.clientHeight-36}}}).change(function(t){e.save(e.xs.getData())}),$("textarea",this.$el).on("keydown",this.keydown),t&&this.xs.loadData(JSON.parse(t))},save:function(t){$.emit("docContentUpdate",JSON.stringify(t))}}};Ye._withStripped=!0;var We={props:["value","current"],name:"Nav",methods:{selected:function(t){if(!t.link)return alert(t.title+"\u6587\u6863\u5c1a\u672a\u521b\u5efa");if("folder"!==t.link){var e={event:"doc",data:t.link};$.emit("chapterEvt",e)}}}},Re=Object(o.a)(We,Ye,[],!1,null,null,null);Re.options.__file="doc/repository/nav.vue";function Fe(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{on:{click:t.toggle}},[t._t("default"),t._v(" "),t.isShow?i("z-dialog",{attrs:{title:"\u6587\u6863\u94fe\u63a5",width:"540px"},on:{close:t.toggle}},[i("z-input",{attrs:{type:"text",value:t.url}}),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-copy",{attrs:{text:t.url,type:"primary"}},[t._v("\u590d\u5236\u94fe\u63a5")])],1)],1):t._e()],2)}var Ge=Re.exports;Fe._withStripped=!0;var Ve={props:["itemId"],data:function(){return{isShow:!1}},computed:{url:function(){return window.location.origin+"/view.html?id="+this.itemId}},methods:{toggle:function(){this.isShow=!this.isShow}}},Be=Object(o.a)(Ve,Fe,[],!1,null,null,null);Be.options.__file="doc/repository/share.vue";function Qe(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-tooltip",{attrs:{content:"\u5386\u53f2\u7248\u672c"}},[n("z-popup",{attrs:{title:"\u6587\u6863\u5386\u53f2\u7248\u672c",size:"200px",type:"text"},on:{show:i.show},scopedSlots:i._u([{key:"content",fn:function(){return[n("z-table",{attrs:{data:i.list}},[n("z-column",{attrs:{label:"\u5b58\u6863\u65e5\u671f"},scopedSlots:i._u([{key:"default",fn:function(t){return[n("z-idate",{attrs:{value:t.row._id}})]}}])}),i._v(" "),n("z-column",{attrs:{width:"150px",label:"\u64cd\u4f5c"},scopedSlots:i._u([{key:"default",fn:function(e){return[n("z-confirm",{attrs:{type:"link"},on:{click:function(t){return i.restore(e.row)}}},[i._v("\u6062\u590d")])]}}])})],1)]},proxy:!0}])},[n("i",{staticClass:"ft icon"},[i._v("\ue73e")])])],1)}var Ke=Be.exports;Qe._withStripped=!0;var Xe={props:["itemId"],data:function(){return{list:[]}},methods:{show:function(){var e=this;return jt()(zt.a.mark(function t(){return zt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get({parentId:e.itemId},"/select/noteLog.json");case 2:e.list=t.sent;case 3:case"end":return t.stop()}},t)}))()},restore:function(i){var n=this;return jt()(zt.a.mark(function t(){var e;return zt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get({_id:i._id},"/get/noteLog.json");case 2:e=t.sent,n.$parent.content=e.content;case 4:case"end":return t.stop()}},t)}))()}}},Ze=Object(o.a)(Xe,Qe,[],!1,null,null,null);Ze.options.__file="doc/repository/history.vue";var ti=Ze.exports,ei={1:"Editor",2:"Mind",5:"Graph",6:"Grid"},ii={2:"\u9009\u4e2d\u8282\u70b9\uff0c\u6309enter\u952e\u6dfb\u52a0\u5b50\u8282\u70b9\uff0ctab\u952e\u6dfb\u52a0\u540c\u7ea7\u8282\u70b9",5:"\u6309Ctr+S\uff0c\u4fdd\u5b58\u6587\u6863"},ni={name:"docBoard",props:["itemId","nodes"],components:{Editor:Me,Mind:Ae,Nav:Ge,Graph:Je,ChangeTitle:Se,Grid:He,Share:Ke,History:ti},data:function(){return{isShow:!1,showNav:!1,readonly:!1,timerId:1,value:null,content:null,tooltip:"",debounce:null}},computed:{name:function(){return this.value?ei[this.value.type]:"Editor"}},watch:{itemId:function(t){this.init(t)}},created:function(){this.debounce=$.debounce(this.save,15e3),this.init(this.itemId),$.on("docContentUpdate",this.debounce)},beforeDestroy:function(){this.debounce.cancel(),$.off("docContentUpdate")},methods:{unload:function(t){this.debounce.flush();return(t=t||window.event).returnValue="\u786e\u5b9a\u9000\u51fa\u5417?"},changeTitle:function(t){this.value.title=t.data.title},init:function(n){var a=this;return jt()(zt.a.mark(function t(){var e,i;return zt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",a.isShow=!1);case 2:return t.next=4,$.get({_id:n},"/note/get.do");case 4:e=t.sent,a.tooltip=ii[e.type],a.value=e,a.content=e.content,e&&e.content||(a.readonly=!1),a.isShow=!0,window.addEventListener("beforeunload",a.unload),-1<(i=window.location.href).indexOf("docId")?(i=$.setParam("docId",n,i),window.history.replaceState(null,e.title,i)):(i=$.setParam("docId",n,i),window.history.pushState(null,e.title,i));case 13:case"end":return t.stop()}},t)}))()},edit:function(){this.readonly=!this.readonly},nav:function(){this.showNav=!this.showNav},save:function(i){var n=this;return jt()(zt.a.mark(function t(){var e;return zt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={_id:n.itemId,content:i},t.next=3,$.post(e,"/note/patch.do");case 3:$.notice("\u4fdd\u5b58\u5b8c\u6210","success");case 4:case"end":return t.stop()}},t)}))()},close:function(){this.debounce.flush(),window.removeEventListener("beforeunload",this.unload),this.$parent.docId="";var t=$.setParam("docId","");window.history.replaceState(null,null,t)}}},ai=Object(o.a)(ni,Oe,[],!1,null,null,null);ai.options.__file="doc/repository/board.vue";var si={props:["data","summary","pid"],components:{Chapter:Le,AddDoc:ze,Board:ai.exports,Share:Ke},data:function(){return{showSet:!1,readonly:!1,docId:null}},provide:function(){return{repository:this}},created:function(){$.on("chapterEvt",this.subscribe);var t=$.getParam("docId");t&&(this.docId=t)},beforeDestroy:function(){$.off("chapterEvt")},methods:{remove:function(t,e,i){for(var n,a,s=0;s<e.length;s++){if((n=e[s]).id===t)return!i&&0<n.sons.length?(alert("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u5148\u5220\u9664\u5b50\u6587\u6863\u3002"),null):(a=e.splice(s,1))[0];if(n.sons&&0<n.sons.length&&(a=this.remove(t,n.sons,i)))return a}return null},add:function(t,e,i,n){for(var a,s=0;s<e.length;s++){if((a=e[s]).id===t)return n?a.sons.unshift(i):e.splice(s,0,i),!0;if(a.sons&&0<a.sons.length&&this.add(t,a.sons,i,n))return!0}return!1},edit:function(t,e){for(var i,n=0;n<e.length;n++){if((i=e[n]).id===t.data){if("folder"===t.event)return i.status=!i.status,!1;if("edit"===t.event&&(i.link=t.link,"folder"===t.link&&(i.status=!0),i.title=t.title,i.uid=t.uid,t.type&&(i.type=t.type)),"title"===t.event){if(i.title===t.title)return!1;i.title=t.title}return!0}if(i.sons&&0<i.sons.length&&this.edit(t,i.sons))return!0}return!1},move:function(t){var e=this.remove(t.from,this.summary.sons,!0),i=$.extend({},e,!1);return this.add(t.to,this.summary.sons,i,t.isSon)},subscribe:function(t){var e,i=this.summary;if("move"===t.event)return e=this.move(t),this.save(e);if("add"!==t.event)return"remove"===t.event?(e=this.remove(t.data.id,i.sons),this.save(e)):"save"===t.event?this.save(!0):"doc"===t.event?this.docId=t.data:(e=this.edit(t,i.sons),void this.save(e));var n={title:"\u65b0\u589e\u6587\u6863",link:"",date:"",sons:[]};return i.id++,n.id=i.id,t.data.sons.push(n),this.save(!0)},cancel:function(){this.readonly=!0},changeTitle:function(t){this.data.title=t.data.title},save:function(){var t={_id:this.data._id,content:JSON.stringify(this.summary)};$.post(t,"/note/patch.do",function(t){},this)}}},ri=Object(o.a)(si,pe,[],!1,null,null,null);ri.options.__file="doc/repository/index.vue";function oi(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-popover",{staticClass:"search",attrs:{width:"260"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("z-input",{attrs:{placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),i("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[i("z-button",{attrs:{size:"mini"},on:{click:e.toggle}},[e._v("\u53d6\u6d88")]),e._v(" "),i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:e.search}},[e._v("\u786e\u5b9a")])],1),e._v(" "),i("i",{staticClass:"ft icon hover",attrs:{slot:"reference"},slot:"reference"},[e._v("\ue7ae")])],1)}var li=ri.exports,ci=function(){return{id:3,sons:[]}};oi._withStripped=!0;var ui={data:function(){return{keyword:"",visible:!1}},methods:{toggle:function(){this.visible=!this.visible},search:function(){this.toggle(),$.emit("J_docList","title",this.keyword)}}},di=Object(o.a)(ui,oi,[],!1,null,null,null);di.options.__file="doc/search.vue";var hi={data:function(){return{content:null,current:null}},components:{Editor:li,Search:di.exports},created:function(){$.on("docSave",this.save)},beforeDestroy:function(){$.off("docSave")},methods:{select:function(t){if(!this.current||this.current._id!==t._id){this.current=t,this.loadContent(t._id,ci());var e=$.setParam("rid",t._id);window.history.replaceState(null,null,e)}},callback:function(t){if(0!==t.total){var e=t.list;if(0===e.length)return this.content=null,this.current=null;this.current&&this.current._id===e[0]._id||this.select(e[0])}},save:function(t,e,i){if(!t)return!1;void 0===i&&(i=3);var n={_id:this.current._id,content:JSON.stringify(e)};$.post(n,"/note/patch.do",function(t){$.notice("\u4fdd\u5b58\u6210\u529f\uff01","success")},this,i)},loadContent:function(t,i){t&&$.post({_id:t},"/get/noteContent.json",function(t){var e=t.data;e.content?this.content=JSON.parse(e.content):this.content=i},this)}}},vi=Object(o.a)(hi,ve,[],!1,null,null,null);vi.options.__file="doc/index.vue";function pi(){var t=this,e=t.$createElement;return(t._self._c||e)("z-execute",{attrs:{type:"link",action:"/thing/restore.do?_id="+t.value,callback:t.callback}},[t._v("\u53d6\u6d88\u5f52\u6863\n")])}var fi=vi.exports;pi._withStripped=!0;var mi={props:["value"],methods:{callback:function(t){$.emit("thingUpdate",t.data,"add")}}},_i=Object(o.a)(mi,pi,[],!1,null,null,null);_i.options.__file="common/thingRestore.vue";function gi(){var t=this.$createElement;return(this._self._c||t)(this.name,{tag:"component",attrs:{value:this.value}})}function wi(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"wrap k-my-setting"},[i._l(i.imgs,function(e){return n("div",{staticClass:"skin",class:{active:e===i.def},on:{click:function(t){return i.select(e)}}},[n("img",{attrs:{src:i.domain+"/bg/"+e+".jpg"}})])}),i._v(" "),n("input",{attrs:{type:"hidden",name:"skin"},domProps:{value:i.def}})],2)}var bi=_i.exports;wi._withStripped=gi._withStripped=!0;var yi={props:["value","data"],data:function(){return{imgs:[1,2,3,4,5,6,7,8,9,10],def:3,domain:""}},mounted:function(){zen.mode<3&&(this.domain="//a.yimiyisu.com/kooteam"),this.value&&(this.def=this.value)},methods:{select:function(t){this.def=t;var e=this.domain+"/bg/"+t+".jpg";$("body").css("background-image","url('"+e+"')")}}},ki=Object(o.a)(yi,wi,[],!1,null,null,null);ki.options.__file="system/components/skin.vue";function xi(){var t=this.$createElement;return(this._self._c||t)("z-submit",{attrs:{action:"/patch/user.json"},on:{finish:this.finish}},[this._v("\u4fdd\u5b58")])}var Ci=ki.exports;xi._withStripped=!0;var zi={props:["value"],methods:{finish:function(t){var e=t.data;zen.user.calendar=e.calendar,zen.user.home=e.home,window.localStorage.config=""}}},$i=Object(o.a)(zi,xi,[],!1,null,null,null);$i.options.__file="system/components/set.vue";function ji(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content"},e._l(e.value,function(t){return i("Thing",{key:t._id,attrs:{now:e.now,data:t}})}),1)}var Si=$i.exports;ji._withStripped=!0;var Ii={props:["value"],components:{Thing:v},data:function(){return{list:[],now:0}},created:function(){var t=new Date;this.now=t.getTime()%1e3}},Ei=Object(o.a)(Ii,ji,[],!1,null,null,null);Ei.options.__file="system/components/thingList.vue";function Oi(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"260px"},attrs:{src:t.qr}}),t._v(" "),i("br"),t._v("\n    \u4e8c\u7ef4\u7801"+t._s(t.date)+"\u524d\u5185\u6709\u6548\n")])}var Ti=Ei.exports;Oi._withStripped=!0;var Li={data:function(){return{qr:""}},computed:{date:function(){var t=new Date;return t=parseInt(t.getTime()/1e3)+900,$.date(t)}},mounted:function(){var t=$.getUser();$.get({id:"join"+t.siteId},"/home/kooteamJoin.do",function(t){this.qr=t.data},this)}},Di=Object(o.a)(Li,Oi,[],!1,null,null,null);Di.options.__file="system/components/invite.vue";var Pi={props:["name","value"],components:{skin:Ci,set:Si,thingList:Ti,invite:Di.exports,user:{data:function(){return{isUpdated:!1}},created:function(){var e=this;return jt()(zt.a.mark(function t(){return zt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(zen.mode<2)return t.abrupt("return");t.next=2;break;case 2:return t.next=4,$.get(null,"/zeto/checkUpdate.do");case 4:e.isUpdated=t.sent;case 5:case"end":return t.stop()}},t)}))()},render:function(t){var e=t,i=$.getUser(),n=zen.mode<2;return e("div",{class:"user-info"},["\u6b22\u8fce\uff0c",i.nick,"!",e("ul",[e("li",[e("z-popup",{attrs:{type:"text",size:"big",view:"/my/info.xhtm"}},["\u4e2a\u4eba\u4e2d\u5fc3"])]),this.isUpdated&&e("li",[e("z-wicket",{attrs:{type:"text",title:"Kooteam\u65b0\u7248\u672c\u5df2\u7ecf\u53d1\u5e03","wicket-size":"small",view:"/my/update.jsx"}},[e("span",{class:"ft red"},["\u65b0\u7248\u672c!"])])]),n&&e("li",[e("z-wicket",{attrs:{type:"text","wicket-size":"small",view:"/my/space.jsx"}},["\u5207\u6362\u7a7a\u95f4"])]),n&&e("li",[e("z-link",{attrs:{type:"text",href:"https://www.kooteam.com/view.html?id=5e5893b9c687557cc87e38c3",target:"_blank"}},["\u79c1\u6709\u90e8\u7f72"])])])])}}}},Ni=Object(o.a)(Pi,gi,[],!1,null,null,null);Ni.options.__file="system/index.vue";function Mi(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bl inline-block",on:{click:e.show}},[e._t("default"),e._v(" "),e.visible?i("z-dialog",{attrs:{width:"450px",title:e.title,visible:""},on:{close:e.close}},[e.showQr?i("QR",{model:{value:e.params,callback:function(t){e.params=t},expression:"params"}}):e._e(),e._v(" "),e.showQr?e._e():i("Password",{attrs:{target:e.target},model:{value:e.params,callback:function(t){e.params=t},expression:"params"}}),e._v(" "),e.isQr?i("div",{staticClass:"ft hover blue",staticStyle:{"text-align":"right"},on:{click:e.change}},[e._v("\n            "+e._s(e.tip)+"\n        ")]):e._e()],1):e._e()],2)}function Ai(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-form",{staticStyle:{width:"380px"},attrs:{"label-width":"90px"}},[i("z-input",{attrs:{label:"\u7528\u6237\u540d"},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),e._v(" "),i("z-input",{attrs:{label:"\u767b\u5f55\u5bc6\u7801","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}}),e._v(" "),i("z-field",[i("z-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("\u63d0\u4ea4")])],1)],1)}var qi=Ni.exports;Ai._withStripped=Mi._withStripped=!0;var Ui={props:["value","target"],data:function(){return{user:"",pwd:""}},methods:{keyup:function(){},submit:function(){var t="/zeto/login.do";this.value&&"ladp"===this.value.type&&(t="/home/ladp.do"),$.post({username:this.user,password:this.pwd,redirect:"/todo/home.xhtm"},t)}}},Yi=Object(o.a)(Ui,Ai,[],!1,null,null,null);Yi.options.__file="login/password.vue";function Ji(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"qr",attrs:{id:"J_qr"}})}var Hi=Yi.exports;Ji._withStripped=!0;var Wi={props:["value"],mounted:function(){var e=this,i=this.value,n=window.location.origin;if("wechat"===i.type)return $.js(["http://rescdn.qqmail.com/node/ww/wwopenmng/js/sso/wwLogin-1.0.0.js"],function(){window.WwLogin({id:"J_qr",appid:i.appid,agentid:i.agentid,redirect_uri:n+i.redirect_uri,state:i.checkId})});if("cloud"===i.type){var t=new Date;return t=$.date(parseInt(t.getTime()/1e3)+900),i.qr&&-1<i.qr.indexOf("null")?this.$el.innerHTML='<div class="ft red">\u975e\u5e38\u62b1\u6b49\uff0c\u56e0\u5fae\u4fe1\u670d\u52a1\u53f7\u8fc1\u79fb\u6b63\u5728\u5ba1\u6279\u4e2d<br />\u7cfb\u7edf\u6682\u65f6\u65e0\u6cd5\u767b\u5f55\u3002</div>':this.$el.innerHTML='<img src="'.concat(i.qr,'"/><br />\u4e8c\u7ef4\u7801').concat(t,"\u524d\u6709\u6548")}$.lib(["qrcode.min.js"],function(){var t=n+i.url;new QRCode(e.$el,{width:150,height:150}).makeCode(t)})}},Ri=Object(o.a)(Wi,Ji,[],!1,null,null,null);Ri.options.__file="login/qr.vue";var Fi={components:{Password:Hi,QR:Ri.exports},data:function(){return{isQr:!1,showQr:!1,visible:!1,params:null,target:"/todo/home.xhtm",timerId:null}},computed:{tip:function(){return this.showQr?"\u8d26\u53f7\u5bc6\u7801\u767b\u9646":"\u624b\u673a\u626b\u7801\u767b\u9646"},title:function(){var t=this.params;return t&&this.isQr?"dingding"===t.type?"\u8bf7\u7528\u9489\u9489\u626b\u7801\u767b\u5f55":"wechat"===t.type?"\u8bf7\u7528\u4f01\u4e1a\u5fae\u4fe1\u626b\u7801\u767b\u5f55":"cloud"===t.type?"\u5fae\u4fe1\u626b\u7801,\u5173\u6ce8\u540e\u767b\u5f55":"ladp"===t.type?"\u8bf7\u4f7f\u7528\u57df\u8d26\u53f7\u767b\u5f55":"\u7528\u6237\u767b\u5f55":"\u7528\u6237\u767b\u5f55"}},mounted:function(){var i=this;return jt()(zt.a.mark(function t(){var e;return zt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get(null,"/home/loginCheck.do");case 2:if(e=t.sent,(i.params=e)&&e.type&&"ladp"!==e.type){t.next=6;break}return t.abrupt("return");case 6:i.isQr=!0,i.showQr=!0,"dingding"!==e.type&&"cloud"!==e.type||(i.timerId=setInterval(i.checkId,2e3));case 9:case"end":return t.stop()}},t)}))()},beforeDestroy:function(){clearInterval(this.timerId)},methods:{show:function(){this.visible=!0},close:function(){this.visible=!1},change:function(){this.showQr=!this.showQr},checkId:function(){var t=this.params.checkId;t&&$.get({checkId:t},"/home/loginCheck.do",function(t){var e=t.action,i=t.data;2===e&&(i.profile&&$.cookie("zenUser",JSON.stringify(i.profile)),i.uri&&$.goto(i.uri))})}}},Gi=Object(o.a)(Fi,Mi,[],!1,null,null,null);Gi.options.__file="login/index.vue";function Vi(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{on:{click:t.init}},[t._t("default"),t._v(" "),t.isShow?i("z-dialog",{attrs:{"custom-class":"k-report",width:"80%",top:"20px"},on:{close:t.close}},["new"===t.type||"edit"===t.type?i("Writer",{attrs:{data:t.report}}):t._e(),t._v(" "),"view"===t.type?i("Preview",{attrs:{data:t.report}}):t._e()],1):t._e()],2)}function Bi(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"input-title",staticStyle:{margin:"0 14px"}},[t._v(t._s(t.report.title))]),t._v(" "),i("div",{staticClass:"article-body",domProps:{innerHTML:t._s(t.report.content)}})])}var Qi=Gi.exports;Bi._withStripped=Vi._withStripped=!0;var Ki={props:["data"],watch:{data:function(t){this.report=t}},data:function(){return{report:{}}},mounted:function(){this.report=this.data}},Xi=Object(o.a)(Ki,Bi,[],!1,null,null,null);Xi.options.__file="report/view.vue";function Zi(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-form",{staticStyle:{width:"100%"},attrs:{"label-width":"90px"}},[i("div",{staticClass:"z-row header"},[i("div",{staticClass:"z-20"},[i("input",{staticClass:"input-title",attrs:{type:"text",name:"title"},domProps:{value:e.report.title}}),e._v(" "),i("input",{attrs:{type:"hidden",name:"_id"},domProps:{value:e.report._id}})]),e._v(" "),i("div",{staticClass:"z-4"},[e.data._id?e._e():i("z-radio",{attrs:{name:"type",type:"button",size:"mini"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[i("var",{attrs:{value:"2"}},[e._v("\u65e5\u62a5")]),e._v(" "),i("var",{attrs:{value:"1"}},[e._v("\u5468\u62a5")])])],1)]),e._v(" "),i("z-editor",{attrs:{value:e.report.content,height:"500",name:"content"}}),e._v(" "),i("z-employee",{staticStyle:{"margin-top":"18px"},attrs:{label:"\u6284\u9001\u4eba",value:e.readers,name:"readers"}}),e._v(" "),i("z-input-tag",{attrs:{label:"\u6284\u9001\u90ae\u7bb1",name:"mails",value:e.report.mails,placeholder:"\u6284\u9001\u90ae\u7bb1"}}),e._v(" "),i("z-field",[i("z-submit",{attrs:{action:"/report/save.do"},on:{finish:e.save}},[e._v("\u4fdd\u5b58")]),e._v(" "),i("z-submit",{attrs:{type:"text",action:"/report/saveWithSend.do"},on:{finish:e.save}},[e._v("\u7acb\u5373\u53d1\u9001")])],1)],1)}var tn=Xi.exports;Zi._withStripped=!0;var en={props:["data"],data:function(){return{report:{},mode:"2",editor:null}},computed:{readers:function(){var t=this.report;return t&&t.readers?JSON.parse(t.readers):[]}},watch:{data:function(t){if(t&&(this.report=t),this.mode===t.type)return this.template(this.mode);this.mode=t.type},mode:function(t){this.template(t)}},created:function(){this.report=this.data||{},this.template(this.mode)},methods:{template:function(n){var a=this;return jt()(zt.a.mark(function t(){var e,i;return zt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.report._id)return t.abrupt("return");t.next=2;break;case 2:return t.next=4,$.post({mode:n},"/report/template.do");case 4:e=t.sent,(i=a.report).title=e.title,i.readers=e.readers,i.mails=e.mails,e.content&&(i.content=e.content);case 10:case"end":return t.stop()}},t)}))()},save:function(t){this.$root.refresh(),t.data&&(this.report._id=t.data._id)}}},nn=Object(o.a)(en,Zi,[],!1,null,null,null);nn.options.__file="report/writer.vue";var an={props:["type","id"],components:{Writer:nn.exports,Preview:tn},data:function(){return{report:null,isShow:!1}},methods:{init:function(){var t=this.id;"new"===this.type&&(this.report={_id:"",type:"1",title:"",readers:"",mails:""}),t?$.post({_id:t},"/report/detail.do",function(t){this.report=t.data,this.isShow=!0},this):this.isShow=!0},close:function(){if("set"===this.type)return this.type="new";this.isShow=!1}}},sn=Object(o.a)(an,Vi,[],!1,null,null,null);sn.options.__file="report/index.vue";function rn(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow?i("z-dialog",{attrs:{top:"5vh",title:"\u65b0\u589e\u4efb\u52a1",width:"600px",visible:""},on:{close:t.close}},[i("z-form",[i("z-input",{staticStyle:{width:"510px"},attrs:{koo:"need",name:"title",label:"\u4efb\u52a1\u6807\u9898",type:"text"}}),t._v(" "),i("z-tcode",{attrs:{code:"priority",value:t.b,name:"tag",label:"\u4f18\u5148\u7ea7",type:"radio"}}),t._v(" "),i("z-date",{attrs:{koo:"need",label:"\u8ba1\u5212\u65f6\u95f4",type:"datetimerange","range-separator":"\u81f3","start-placeholder":"\u5f00\u59cb\u65e5\u671f","end-placeholder":"\u7ed3\u675f\u65e5\u671f","default-time":["9:00:00","12:00:00"],value:t.range},on:{confirm:t.selectDate}}),t._v(" "),i("z-employee",{attrs:{label:"\u8d1f\u8d23\u4eba",name:"owner",max:1}}),t._v(" "),0<t.sections.length?i("z-select",{attrs:{name:"section",label:"\u6240\u5c5e\u9636\u6bb5",data:t.sections}}):t._e(),t._v(" "),i("z-field",[i("z-submit",{attrs:{callback:t.callback,action:"/thing/put.do"}},[t._v("\u4fdd\u5b58")]),t._v(" "),i("z-button",{on:{click:t.close}},[t._v("\u53d6\u6d88")])],1)],1)],1):t._e()}var on=sn.exports;rn._withStripped=!0;var ln={data:function(){return{isShow:!1,sections:[],range:[],start:"",end:""}},created:function(){$.on("thingAdd",this.init)},methods:{init:function(t){this.isShow||(this.title="",this.range=t.range||[],this.sections=t.sections||[],this.isShow=!0)},selectDate:function(t){!t||t.length<2||(this.start=t[0],this.end=t[0])},callback:function(t){$.emit("thingUpdate",t.data,"add")},close:function(){this.isShow=!1}}},cn=Object(o.a)(ln,rn,[],!1,null,null,null);cn.options.__file="todo/add/index.vue";function un(){var e=this,t=e.$createElement;return(e._self._c||t)(e.com,{tag:"component",attrs:{projectId:e.projectId},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})}function dn(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",[n("z-button",{staticClass:"bl mb",on:{click:i.trigger}},[i._v("\n        \u6dfb\u52a0\u72b6\u6001\n        "),i.visible?n("z-dialog",{attrs:{width:"480px",title:"\u6dfb\u52a0\u72b6\u6001"}},[n("z-input",{attrs:{label:"\u72b6\u6001\u6807\u9898",type:"text",maxlength:"30"},model:{value:i.title,callback:function(t){i.title=t},expression:"title"}}),i._v(" "),n("z-radio",{attrs:{label:"\u662f\u5426\u5b8c\u6210\u6001"},model:{value:i.type,callback:function(t){i.type=i._n(t)},expression:"type"}},[n("var",{attrs:{value:0}},[i._v("\u5426")]),i._v(" "),n("var",{attrs:{value:1}},[i._v("\u662f")])]),i._v(" "),n("z-select",{attrs:{label:"\u663e\u793a\u989c\u8272"},model:{value:i.color,callback:function(t){i.color=t},expression:"color"}},[n("var",{attrs:{value:"red"}},[i._v("\u7ea2\u8272")]),i._v(" "),n("var",{attrs:{value:"green"}},[i._v("\u7eff\u8272")]),i._v(" "),n("var",{attrs:{value:"yellow"}},[i._v("\u9ec4\u8272")]),i._v(" "),n("var",{attrs:{value:"gray"}},[i._v("\u7070\u8272")])]),i._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("z-button",{on:{click:i.trigger}},[i._v("\u53d6 \u6d88")]),i._v(" "),n("z-button",{attrs:{type:"primary"},on:{click:i.set}},[i._v("\u786e \u5b9a")])],1)],1):i._e()],1),i._v(" "),n("z-table",{attrs:{data:i.categorys}},[n("z-column",{attrs:{label:"\u72b6\u6001\u540d\u79f0"},scopedSlots:i._u([{key:"default",fn:function(t){return[n("span",{class:["ft",t.row.color]},[i._v(i._s(t.row.title))])]}}])}),i._v(" "),n("z-column",{attrs:{label:"\u662f\u5426\u5b8c\u6210\u6001"},scopedSlots:i._u([{key:"default",fn:function(t){return[n("span",[i._v(i._s(0===t.row.type?"\u5426":"\u662f"))])]}}])}),i._v(" "),n("z-column",{attrs:{label:"\u64cd\u4f5c"},scopedSlots:i._u([{key:"default",fn:function(e){return[n("span",{staticClass:"z-link",on:{click:function(t){return i.trigger(e.row)}}},[i._v("\u7f16\u8f91")]),i._v(" "),n("z-confirm",{attrs:{type:"link",tip:"\u786e\u5b9a\u5220\u9664\u5417"},on:{click:function(t){return i.remove(e.row)}}},[i._v("\u5220\u9664")])]}}])})],1)],1)}var hn=cn.exports;dn._withStripped=un._withStripped=!0;var vn=Vue.observable({}),pn=[],fn=$.debounce(jt()(zt.a.mark(function t(){var e;return zt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get({ids:pn},"/project/getByIds.do");case 2:e=t.sent,pn=[],e.forEach(function(t){var e=t.category;e&&mn.set(t._id,JSON.parse(e))});case 5:case"end":return t.stop()}},t)})),300),mn={get:function(t){return vn[t]||(pn.push(t),Vue.set(vn,t,[]),fn()),vn[t]},set:function(t,e){e&&(vn[t]=e)}},_n=mn,gn={props:["value"],data:function(){return{title:"",categorys:[],type:0,color:"",current:null,visible:!1,boardId:null}},created:function(){var t=this.value;this.boardId=t.borderId||zen.id(),t.category&&(this.categorys=JSON.parse(t.category))},methods:{set:function(){var e=this;if(!this.title)return $.notice("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a","error");if(this.current)this.categorys.forEach(function(t){t.id===e.current&&(t.title=e.title,t.type=e.type,t.color=e.color)});else{this.boardId++;var t={title:this.title,id:this.boardId,type:this.type,color:this.color};this.categorys.push(t)}this.save()},trigger:function(t){t?(this.title=t.title,this.current=t.id,this.type=t.type||0,this.color=t.color||""):(this.title="",this.current=""),this.visible=!this.visible},remove:function(e){this.categorys=this.categorys.filter(function(t){if(t.id!==e.id)return t}),this.save()},save:function(){var e=this.value._id;$.post({_id:e,boardId:this.boardId,category:JSON.stringify(this.categorys)},"/patch/project.json",function(t){this.visible=!1,_n.set(e,this.categorys)},this)}}},wn=Object(o.a)(gn,dn,[],!1,null,null,null);wn.options.__file="project/common/categoryManager.vue";function bn(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\u5206\u7c7b\u9009\u62e9\u5668")])}var yn=wn.exports;bn._withStripped=!0;var kn={props:["projectId","value"],created:function(){}},xn=Object(o.a)(kn,bn,[],!1,null,null,null);xn.options.__file="project/common/categorySelector.vue";function Cn(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\u9636\u6bb5\u9009\u62e9\u5668")])}var zn=xn.exports;Cn._withStripped=!0;var $n={props:["projectId","value"],created:function(){}},jn=Object(o.a)($n,Cn,[],!1,null,null,null);jn.options.__file="project/common/sectionSelector.vue";function Sn(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("z-select",{attrs:{label:"\u9879\u76ee\u6a21\u7248",data:e.list,"title-key":"title","value-key":"key"},on:{change:e.change}}),e._v(" "),i("input",{attrs:{type:"hidden",name:"board"},domProps:{value:JSON.stringify(e.process)}}),e._v(" "),0<e.process.length?i("div",{staticClass:"k-project-process"},[i("p",{staticClass:"title"},[e._v("\u5de5\u4f5c\u6d41\u7a0b")]),e._v(" "),i("ul",e._l(e.process,function(t){return i("li",{key:t.tag},[i("span",{staticClass:"item-name"},[e._v(e._s(t.title))])])}),0)]):e._e()],1)}var In=jn.exports;Sn._withStripped=!0;var En=[{key:"soft",title:"\u8f6f\u4ef6\u5f00\u53d1",data:[{title:"\u4ea7\u54c1\u89c4\u5212",tag:"t1",sons:[]},{title:"\u524d\u7aef\u5f00\u53d1",tag:"t2",sons:[]},{title:"\u540e\u7aef\u5f00\u53d1",tag:"t3",sons:[]},{title:"\u6d4b\u8bd5",tag:"t4",sons:[]},{title:"\u53d1\u5e03",tag:"t5",sons:[]},{title:"\u5176\u5b83",tag:"t6",sons:[]}]},{key:"bug",title:"\u7f3a\u9677\u8ddf\u8e2a",data:[{title:"New",tag:"t1",sons:[]},{title:"Fixed",tag:"t2",sons:[]},{title:"Reopen",tag:"t3",sons:[]},{title:"Won`tfix",tag:"t4",sons:[]},{title:"Open",tag:"t5",sons:[]},{title:"Later",tag:"t6",sons:[]},{title:"Duplicate",tag:"t7",sons:[]},{title:"Invalid",tag:"t8",sons:[]},{title:"ByDesign",tag:"t9",sons:[]},{title:"Closed",tag:"t10",sons:[]}]},{key:"mall",title:"\u7535\u5546\u8fd0\u8425",data:[{title:"\u9879\u76ee\u8ba1\u5212",tag:"t1",sons:[]},{title:"\u62cd\u6444\u548c\u4fee\u56fe",tag:"t2",sons:[]},{title:"\u5546\u54c1\u5907\u8d27",tag:"t3",sons:[]},{title:"\u9875\u9762\u8bbe\u8ba1",tag:"t4",sons:[]},{title:"\u540e\u53f0\u8bbe\u7f6e",tag:"t5",sons:[]},{title:"\u9884\u70ed\u548c\u4e0a\u65b0",tag:"t6",sons:[]}]},{key:"plan",title:"\u9700\u6c42\u7ba1\u7406",data:[{title:"\u9700\u6c42\u6536\u96c6",tag:"t1",sons:[]},{title:"\u8bc4\u4f30\u4e2d",tag:"t2",sons:[]},{title:"\u91c7\u7eb3\u6c60",tag:"t3",sons:[]},{title:"\u8bbe\u8ba1\u4e2d",tag:"t4",sons:[]},{title:"\u5f00\u53d1\u4e2d",tag:"t5",sons:[]},{title:"\u6d4b\u8bd5\u4e2d",tag:"t6",sons:[]},{title:"\u5df2\u4e0a\u7ebf",tag:"t7",sons:[]},{title:"\u672a\u91c7\u7eb3",tag:"t8",sons:[]}]},{key:"product",title:"\u4ea7\u54c1\u5f00\u53d1",data:[{title:"\u4ea7\u54c1\u8ba1\u5212",tag:"t1",sons:[]},{title:"\u6b63\u5728\u8bbe\u8ba1",tag:"t2",sons:[]},{title:"\u6b63\u5728\u7814\u53d1",tag:"t3",sons:[]},{title:"\u6d4b\u8bd5",tag:"t4",sons:[]},{title:"\u51c6\u5907\u53d1\u5e03",tag:"t5",sons:[]},{title:"\u53d1\u5e03\u6210\u529f",tag:"t6",sons:[]}]},{key:"project",title:"\u5de5\u7a0b\u9879\u76ee",data:[{title:"\u9879\u76ee\u8bc4\u4f30",tag:"t1",sons:[]},{title:"\u7acb\u9879",tag:"t2",sons:[]},{title:"\u65b9\u6848\u8bbe\u8ba1",tag:"t3",sons:[]},{title:"\u6807\u4e66\u5236\u4f5c",tag:"t4",sons:[]},{title:"\u6295\u6807\u9636\u6bb5",tag:"t5",sons:[]},{title:"\u6df1\u5316\u8bbe\u8ba1",tag:"t6",sons:[]},{title:"\u5408\u540c\u7b7e\u5b9a\u53ca\u79fb\u4ea4",tag:"t7",sons:[]},{title:"\u65bd\u5de5",tag:"t8",sons:[]},{title:"\u9a8c\u6536",tag:"t9",sons:[]},{title:"\u9879\u76ee\u6536\u5c3e",tag:"t10",sons:[]}]},{key:"person",title:"\u4e2a\u4eba\u5b89\u6392",data:[{title:"\u5f85\u529e",tag:"t1",sons:[]},{title:"\u8d2d\u7269",tag:"t2",sons:[]},{title:"\u8bfb\u4e66",tag:"t3",sons:[]},{title:"\u8fdb\u4fee",tag:"t4",sons:[]},{title:"\u5065\u8eab",tag:"t5",sons:[]},{title:"\u5df2\u5b8c\u6210",tag:"t6",sons:[]}]},{key:"hr",title:"\u4eba\u4e8b\u62db\u8058",data:[{title:"\u7b80\u5386\u7b5b\u9009",tag:"t1",sons:[]},{title:"\u7b80\u5386\u4e0d\u901a\u8fc7",tag:"t2",sons:[]},{title:"\u9762\u8bd5\u5b89\u6392",tag:"t3",sons:[]},{title:"\u9762\u8bd5\u901a\u8fc7",tag:"t4",sons:[]},{title:"\u9762\u8bd5\u4e0d\u901a\u8fc7",tag:"t5",sons:[]},{title:"Offer \u53d1\u653e",tag:"t6",sons:[]},{title:"\u5165\u804c",tag:"t7",sons:[]},{title:"\u4eba\u624d\u5e93 - \u672a\u5f55\u7528",tag:"t8",sons:[]}]}],On={data:function(){return{list:En,process:[]}},methods:{change:function(e){var i=this;En.forEach(function(t){t.key===e&&(i.process=t.data)})}}},Tn=Object(o.a)(On,Sn,[],!1,null,null,null);Tn.options.__file="project/add.vue";function Ln(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"k-project-process"},[i("ul",e._l(e.process,function(t){return i("li",[i("span",{staticClass:"item-name"},[e._v(e._s(t.title))])])}),0)])}var Dn=Tn.exports;Ln._withStripped=!0;var Pn={data:function(){return{process:[]}},props:["content"],created:function(){this.process=JSON.parse(this.content)}},Nn=Object(o.a)(Pn,Ln,[],!1,null,null,null);Nn.options.__file="project/process.vue";var Mn=Nn.exports,An={props:["name","projectId","value"],computed:{com:function(){var t=this.name;return"add"===t?Dn:"process"===t?Mn:"CategoryManager"===t?yn:"CategorySelector"===t?zn:"SectionSelector"===t?In:null}},created:function(){}},qn=Object(o.a)(An,un,[],!1,null,null,null);qn.options.__file="project/index.vue";function Un(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("keep-alive",[i(e.com,{tag:"component",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),"gantt"===e.current?i("z-popover",{attrs:{trigger:"hover",width:"60"}},[i("ul",{staticClass:"k-quard-list"},[i("li",{on:{click:function(t){return e.emit("now")}}},[i("span",{staticClass:"ft icon",class:{active:"now"===e.active}},[e._v("\u73b0\u5728")])]),e._v(" "),i("li",{on:{click:function(t){return e.emit("day")}}},[i("span",{staticClass:"ft icon",class:{active:"day"===e.active}},[e._v("\u5929\u89c6\u56fe")])]),e._v(" "),i("li",{on:{click:function(t){return e.emit("week")}}},[i("span",{staticClass:"ft icon",class:{active:"week"===e.active}},[e._v("\u5468\u89c6\u56fe")])]),e._v(" "),i("li",{on:{click:function(t){return e.emit("month")}}},[i("span",{staticClass:"ft icon",class:{active:"month"===e.active}},[e._v("\u6708\u89c6\u56fe")])])]),e._v(" "),i("template",{slot:"reference"},[i("i",{staticClass:"k-gantt-action ft icon",on:{click:function(t){return e.emit("now")}}},[e._v("\ue8a1")])])],2):e._e()],1)}function Yn(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-board-detail"},[0<t.width?i("z-scrollbar",{attrs:{viewHeight:-100,viewWidth:t.width}},[i("z-draggable",{staticClass:"k-board-column",attrs:{draggable:".J_data",list:t.columns},on:{end:t.save}},[t._l(t.columns,function(t){return i("Column",{key:t.tag,attrs:{data:t}})}),t._v(" "),i("AddColumn")],2)],1):t._e()],1)}function Jn(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column J_data",attrs:{"data-id":e.data.tag}},[i("Title",{attrs:{column:e.data}}),e._v(" "),i("z-scrollbar",{attrs:{height:-150,"data-id":e.data.tag}},[i("z-draggable",{attrs:{list:e.data.sons,group:"things"},on:{add:e.begin,end:e.end}},e._l(e.data.sons,function(t){return i("Thing",{key:t._id,attrs:{now:e.now,item:t}})}),1),e._v(" "),i("AddThing",{attrs:{data:e.data},on:{changeCategory:e.addTing}})],1)],1)}function Hn(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"k-board-add"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!i.isAdd,expression:"!isAdd"}],staticClass:"action",on:{click:i.show}},[n("i",{staticClass:"ft icon"},[i._v("\ue857")]),i._v("\u6dfb\u52a0\u5f85\u529e\n    ")]),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:i.isAdd,expression:"isAdd"}],staticClass:"wrap"},[n("z-input",{attrs:{type:"textarea",autosize:"",placeholder:"\u8bf7\u8f93\u5165\u8981\u5904\u7406\u7684\u4e8b\u9879"},nativeOn:{keyup:function(t){return i.keyup(t)}},model:{value:i.title,callback:function(t){i.title=t},expression:"title"}}),i._v(" "),n("div",{staticClass:"prority"},[i._l(i.prorityData,function(e){return n("z-tooltip",{key:e.key,attrs:{content:e.title}},[n("label",{class:["k-prority-add",e.key,{active:e.key===i.prority}],on:{click:function(t){return i.select(e,t)}}})])}),i._v(" "),n("div",{staticClass:"btns"},[n("z-button",{attrs:{size:"mini",type:"primary"},on:{click:i.save}},[i._v("\u6dfb\u52a0\u4efb\u52a1")]),i._v(" "),n("i",{staticClass:"ft icon",on:{click:i.close}},[i._v("\ue710")])],1)],2)],1)])}var Wn=qn.exports;Hn._withStripped=Jn._withStripped=Yn._withStripped=Un._withStripped=!0;var Rn=[{key:"a",title:"\u91cd\u8981\u4e14\u7d27\u6025"},{key:"b",title:"\u91cd\u8981\u4e0d\u7d27\u6025"},{key:"c",title:"\u7d27\u6025\u4e0d\u91cd\u8981"},{key:"d",title:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025"}],Fn={props:["data"],data:function(){return{title:"",uid:"",prority:"b",isAdd:!1,prorityData:Rn}},mounted:function(){this.uid=zen.user.id},methods:{show:function(){var e=this;this.isAdd=!0,this.$nextTick(function(t){$("textarea",e.$el).el[0].focus()})},close:function(){this.isAdd=!1},select:function(t){t.key!==this.prority&&(this.prority=t.key)},keyup:function(t){var e=this,i=t.keyCode;if(13===i&&(t.stopPropagation(),t.preventDefault(),this.save(),this.$nextTick(function(t){e.title=""})),27===i)return t.preventDefault(),this.close()},save:function(){if(!this.title)return alert("\u4efb\u52a1\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");var i={title:this.title,tag:this.data.tag,projectId:$.getParam("id"),quadrant:"b",status:0};this.prority&&(i.quadrant=this.prority),$.post(i,"/thing/put.do",function(t){var e=t.data;i._id=e._id,i.order=e.order,i.owner=e.owner,this.title="",this.$emit("changeCategory",i)},this)}}},Gn=Object(o.a)(Fn,Hn,[],!1,null,null,null);Gn.options.__file="project/board/addThing.vue";function Vn(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"thing",class:e.item.quadrant,attrs:{drag:"board"},on:{dblclick:e.dblclick,click:function(t){return e.detail(e.item)}}},[i("div",{staticClass:"title",class:{finished:1===e.item.status}},[e._v(e._s(e.item.title))]),e._v(" "),i("div",{staticClass:"more"},[i("k-thing-status",{staticClass:"status",attrs:{value:e.item}}),e._v(" "),i("z-avatar",{attrs:{size:"small",uid:e.item.owner}})],1)])}var Bn=Gn.exports;Vn._withStripped=!0;var Qn={props:["item"],methods:{detail:function(t){$.emit("thingDetail",t._id)},dblclick:function(t){t.preventDefault(),t.stopPropagation()}}},Kn=Object(o.a)(Qn,Vn,[],!1,null,null,null);Kn.options.__file="project/board/thing.vue";function Xn(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"h4"},[e._v("\n        "+e._s(e.column.title)+"\n        "),i("z-popover",{attrs:{placement:"bottom-end","popper-class":"z-project-pop",width:"50",trigger:"click"}},[i("span",{staticClass:"ft hover",on:{click:function(t){e.visible=!0}}},[e._v("\u91cd\u547d\u540d")]),e._v(" "),i("z-confirm",{staticClass:"ft hover",attrs:{tip:"\u786e\u5b9a\u5220\u9664\u9762\u677f\u5417"},on:{click:e.remove}},[e._v("\u5220\u9664")]),e._v(" "),i("i",{staticClass:"ft icon",attrs:{slot:"reference"},slot:"reference"},[e._v("\ue737")])],1),e._v(" "),e.visible?i("z-dialog",{attrs:{width:"30%",title:"\u4fee\u6539\u540d\u79f0"}},[i("z-input",{attrs:{type:"text",maxlength:"30"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-button",{on:{click:function(t){e.visible=!1}}},[e._v("\u53d6 \u6d88")]),e._v(" "),i("z-button",{attrs:{type:"primary"},on:{click:e.updateTitle}},[e._v("\u786e \u5b9a")])],1)],1):e._e()],1)])}var Zn=Kn.exports;Xn._withStripped=!0;var ta={props:["column"],data:function(){return{visible:!1,title:""}},created:function(){this.title=this.column.title},methods:{remove:function(){if(0!==this.column.sons.length)return $.notice("\u9762\u677f\u4e2d\u8fd8\u5b58\u5728\u5b8c\u6210\u4efb\u52a1\uff0c\u4e0d\u80fd\u5220\u9664","error");$.emit("boardRemove",this.column.tag)},updateTitle:function(){$.emit("boardUpdate",this.title,this.column.tag),this.column.title=this.title,this.visible=!1}}},ea=Object(o.a)(ta,Xn,[],!1,null,null,null);ea.options.__file="project/board/title.vue";var ia={props:["data","now"],components:{Thing:Zn,AddThing:Bn,Title:ea.exports},inject:["getColumn"],methods:{begin:function(t){t.pullMode&&this.drag(t)},end:function(t){t.pullMode||t.newIndex===t.oldIndex||this.drag(t)},drag:function(t){var e,i,n=t.newIndex,a=this.data,s={_id:a.sons[n]._id,tag:this.data.tag};if(0===n)1===a.sons.length?s.order=1e5:(i=this.data.sons[n+1],s.order=i.order-500);else if(n===a.sons.length)e=a.sons[n-1],s.order=e.order+500;else{var r=a.sons[n+1],o=a.sons[n-1];s.order=r?parseInt((r.order+o.order)/2):o.order+1}$.post(s,"/thing/patch.do",function(t){var e=this.getColumn(s.tag);$.post({thingId:s._id,content:"\u628a\u4efb\u52a1\u79fb\u5165\u5230:"+e.title},"/put/thingLog.json")},this)},sort:function(t,e){p(t,e,this.data.sons)},addTing:function(t){this.data.sons.unshift(t)}}},na=Object(o.a)(ia,Jn,[],!1,null,null,null);na.options.__file="project/board/column.vue";function aa(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column k-column-add"},[i("div",{staticClass:"trigger ft hover",on:{click:e.toggle}},[i("i",{staticClass:"ft icon"},[e._v("\ue8c8")]),e._v("\u6dfb\u52a0\u4e00\u4e2a\u65b0\u5217\u8868\n    ")]),e._v(" "),e.isAdd?i("div",{staticClass:"wrap"},[i("z-input",{attrs:{maxlength:"30",placeholder:"\u8bf7\u8f93\u5165\u8981\u5904\u7406\u7684\u4e8b\u9879"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.toggle(t)}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),i("div",{staticClass:"prority"},[i("z-button",{attrs:{size:"mini",type:"primary"},on:{click:e.save}},[e._v("\u4fdd\u5b58")]),e._v(" "),i("z-button",{attrs:{size:"mini"},on:{click:e.toggle}},[e._v("\u53d6\u6d88")])],1)],1):e._e()])}var sa=na.exports,ra=[{title:"\u4ea7\u54c1\u89c4\u5212",tag:"t1",sons:[]},{title:"\u524d\u7aef\u5f00\u53d1",tag:"t2",sons:[]},{title:"\u540e\u7aef\u5f00\u53d1",tag:"t3",sons:[]},{title:"\u6d4b\u8bd5",tag:"t4",sons:[]},{title:"\u53d1\u5e03",tag:"t5",sons:[]},{title:"\u5176\u5b83",tag:"t6",sons:[]}];aa._withStripped=!0;var oa={data:function(){return{isAdd:!1,title:""}},methods:{toggle:function(){this.isAdd=!this.isAdd},save:function(){if(!this.title)return $.notice("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a","error");$.emit("boardUpdate",this.title),this.toggle(),this.title=""}}},la=Object(o.a)(oa,aa,[],!1,null,null,null);la.options.__file="project/board/addColum.vue";var ca=la.exports,ua="\u672a\u5f52\u7c7b",da={props:["value"],components:{Column:sa,AddColumn:ca},data:function(){return{projectId:"",data:{},width:0,columns:[]}},provide:function(){return{getColumn:this.getColumn}},watch:{value:function(){this.init()}},created:function(){this.init(),$.on("thingUpdate",this.thingChange),$.on("boardUpdate",this.rsync),$.on("boardRemove",this.remove)},beforeDestroy:function(){$.off("thingUpdate"),$.off("boardUpdate"),$.off("boardRemove")},methods:{thingChange:function(t,e){var i=this.getColumn(t.tag);if(i){var n=i.sons;if("add"===e)return n.unshift(t);for(var a=0;a<n.length;a++)if(n[a]._id===t._id)return void("remove"===e?n.splice(a,1):n[a][e]=t[e])}},init:function(){var i=this;this.columns=[],this.projectId=$.getParam("id");var t=this.value;t.board?this.columns=JSON.parse(t.board):this.columns=ra,this.columns.forEach(function(t){t.sons=[]}),this.resize();var e=t.things;e&&0!==e.length&&(e.forEach(function(t){var e=i.getColumn(t.tag);1===t.status?e.sons.push(t):e.sons.unshift(t)}),this.columns[0].tag===ua&&0===this.columns[0].length&&this.columns.splice(0,1))},resize:function(){this.width=320*(this.columns.length+1)},getColumn:function(t){for(var e,i=0;i<this.columns.length;i++)if((e=this.columns[i]).tag===t)return e;if(this.columns[0].tag===ua)return this.columns[0];var n={tag:ua,title:ua,sons:[]};return this.columns.unshift(n),this.columns[0]},remove:function(t){for(var e=0;e<this.columns.length;e++)this.columns[e].tag===t&&this.columns.splice(e,1);this.rsync()},rsync:function(e,i){var t=this.data.borderId||zen.id()+50,n=[];if(this.columns.forEach(function(t){n.push({title:t.title,tag:t.tag,sons:[]})}),e)if(i)n.forEach(function(t){t.tag===i&&(t.title=e)});else{var a={title:e,tag:"t"+ ++t,sons:[]};n.push(a),this.columns.push(a)}var s={_id:this.projectId,borderId:t,board:JSON.stringify(n)};$.post(s,"/patch/project.json",function(){this.resize()},this)},save:function(t){t.pullMode||t.newIndex===t.oldIndex||this.rsync()}}},ha=Object(o.a)(da,Yn,[],!1,null,null,null);ha.options.__file="project/board/index.vue";function va(){var i=this,t=i.$createElement,n=i._self._c||t;return n("z-scrollbar",{staticClass:"k-main",attrs:{height:-100}},[n("div",{staticClass:"content"},[n("ProjectFilter",{attrs:{sections:i.sections}}),i._v(" "),n("z-table",{attrs:{data:i.list,"row-key":"_id",border:""}},[n("z-column",{attrs:{label:"\u4efb\u52a1\u540d\u79f0"},scopedSlots:i._u([{key:"default",fn:function(e){return[n("span",{staticClass:"ft hover",on:{click:function(t){return i.detail(e.row._id)}}},[i._v(i._s(e.row.title))])]}}])}),i._v(" "),n("z-column",{attrs:{label:"\u8ba1\u5212\u65f6\u95f4",width:"300"},scopedSlots:i._u([{key:"default",fn:function(t){return[n("z-idate",{attrs:{value:t.row.start}}),i._v(" "),t.row.end?n("span",[i._v("\u81f3\n                    "),n("z-idate",{attrs:{value:t.row.end}})],1):i._e()]}}])}),i._v(" "),n("z-column",{attrs:{label:"\u8d1f\u8d23\u4eba",width:"120"},scopedSlots:i._u([{key:"default",fn:function(t){return[n("z-nick",{attrs:{uid:t.row.owner}})]}}])}),i._v(" "),n("z-column",{attrs:{label:"\u4f18\u5148\u7ea7",width:"60"},scopedSlots:i._u([{key:"default",fn:function(t){return[n("z-tcode",{attrs:{code:"priority",value:t.row.quadrant}})]}}])}),i._v(" "),n("z-column",{attrs:{label:"\u72b6\u6001",width:"100"},scopedSlots:i._u([{key:"default",fn:function(t){return[n("k-thing-status",{attrs:{value:t.row}})]}}])}),i._v(" "),n("z-column",{attrs:{label:"\u9636\u6bb5",width:"120"},scopedSlots:i._u([{key:"default",fn:function(t){return[n("ProjectSection",{attrs:{sections:i.sections,value:t.row.tag}})]}}])}),i._v(" "),n("z-column",{attrs:{label:"\u64cd\u4f5c",width:"80"},scopedSlots:i._u([{key:"default",fn:function(e){return[n("z-confirm",{attrs:{type:"link",tip:"\u786e\u5b9a\u5220\u9664\u5417\uff1f"},on:{click:function(t){return i.remove(e.row._id)}}},[i._v("\u5220\u9664")])]}}])})],1),i._v(" "),0<i.total?n("z-pagination",{staticStyle:{"text-align":"center","margin-top":"12px"},attrs:{background:"","current-page":i.page+1,"page-size":i.params.size,total:i.total,layout:"total, prev, pager, next"},on:{"current-change":i.jump}}):i._e()],1)])}function pa(){var e=this,t=e.$createElement,i=e._self._c||t;return i("z-row",{staticClass:"k-form-action"},[i("i",{staticClass:"ft hover icon more",class:{active:e.isMore},on:{click:e.trigger}}),e._v(" "),i("z-col",{attrs:{span:6}},[i("z-select",{attrs:{label:"\u72b6\u6001"},on:{change:e.emit},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},[i("var",[e._v("\u8bf7\u9009\u62e9")]),e._v(" "),i("var",{attrs:{value:"0"}},[e._v("\u672a\u5b8c\u6210")]),e._v(" "),i("var",{attrs:{value:"1"}},[e._v("\u5df2\u5b8c\u6210")]),e._v(" "),i("var",{attrs:{value:"2"}},[e._v("\u5df2\u8d85\u65f6")])])],1),e._v(" "),i("z-col",{attrs:{span:6}},[i("z-employee",{attrs:{label:"\u8d1f\u8d23\u4eba",max:1},on:{change:e.emit},model:{value:e.params.owner,callback:function(t){e.$set(e.params,"owner",t)},expression:"params.owner"}})],1),e._v(" "),i("z-col",{attrs:{span:6}},[i("z-select",{attrs:{label:"\u4f18\u5148\u7ea7"},on:{change:e.emit},model:{value:e.params.priority,callback:function(t){e.$set(e.params,"priority",t)},expression:"params.priority"}},[i("var",{attrs:{value:"a"}},[e._v("P1")]),e._v(" "),i("var",{attrs:{value:"b"}},[e._v("P2")]),e._v(" "),i("var",{attrs:{value:"c"}},[e._v("P3")]),e._v(" "),i("var",{attrs:{value:"d"}},[e._v("P4")])])],1),e._v(" "),i("z-col",{attrs:{span:6}},[i("z-select",{attrs:{data:e.sections,label:"\u9636\u6bb5"},on:{change:e.emit},model:{value:e.params.section,callback:function(t){e.$set(e.params,"section",t)},expression:"params.section"}})],1),e._v(" "),i("z-col",{directives:[{name:"show",rawName:"v-show",value:e.isMore,expression:"isMore"}],attrs:{span:12}},[i("z-date",{staticStyle:{width:"200px"},attrs:{label:"\u5f00\u59cb\u65f6\u95f4",type:"datetimerange","range-separator":"\u81f3","start-placeholder":"\u5f00\u59cb\u65e5\u671f","end-placeholder":"\u7ed3\u675f\u65e5\u671f","default-time":["9:00:00","12:00:00"]},on:{confirm:e.startChange}})],1),e._v(" "),i("z-col",{directives:[{name:"show",rawName:"v-show",value:e.isMore,expression:"isMore"}],attrs:{span:12}},[i("z-date",{attrs:{label:"\u5f00\u59cb\u65f6\u95f4",type:"datetimerange","range-separator":"\u81f3","start-placeholder":"\u5f00\u59cb\u65e5\u671f","end-placeholder":"\u7ed3\u675f\u65e5\u671f","default-time":["9:00:00","12:00:00"]},on:{confirm:e.endChange}})],1)],1)}var fa=ha.exports;pa._withStripped=va._withStripped=!0;var ma={props:["sections"],data:function(){return{params:{status:null,owner:null,priority:null,title:null,section:null,start1:null,start2:null,end1:null,end2:null},isMore:!1,startRange:[],endRange:[],changeTitle:null}},created:function(){this.changeTitle=$.debounce(this.emit,300)},methods:{trigger:function(){this.isMore=!this.isMore},startChange:function(t){t&&0!==t.length?(this.params.start1=t[0],this.params.start2=t[1]):this.params.start1=this.params.start2=null,$.emit("projectList",this.params)},endChange:function(t){t&&0!==t.length?(this.params.end1=t[0],this.params.end2=t[1]):this.params.end1=this.params.end2=null,$.emit("projectList",this.params)},emit:function(){var t=this;this.$nextTick(function(){return $.emit("projectList",t.params)})}}},_a=Object(o.a)(ma,pa,[],!1,null,null,null);_a.options.__file="project/list/filter.vue";function ga(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[t._v(t._s(t.title))])}var wa=_a.exports;ga._withStripped=!0;var ba={props:["sections","value"],computed:{title:function(){var t=this.sections;if(!t)return"";for(var e=0;e<t.length;e++)if(t[e].value===this.value)return t[e].text;return""}}},ya=Object(o.a)(ba,ga,[],!1,null,null,null);ya.options.__file="project/list/section.vue";var ka={props:["value"],components:{ProjectFilter:wa,ProjectSection:ya.exports},data:function(){return{list:[],page:0,now:0,total:0,sections:[],params:null}},created:function(){var e=this,t=this.value,i=t._id;t.board&&JSON.parse(t.board).forEach(function(t){return e.sections.push({text:t.title,value:t.tag})}),this.params={_id:i,size:20},this.now=parseInt((new Date).getTime()/1e3),this.load(),$.on("projectList",this.load)},beforeDestroy:function(){$.off("projectList")},methods:{load:function(t){var e=this.params;if(e.page=this.page,t)for(var i in t)e[i]=t[i];$.get(e,"/project/searchThings.do",function(t){var e=t.data;this.list=e.list,this.total=e.total},this)},jump:function(t){this.page=t,this.load()},detail:function(t){$.emit("thingDetail",t)},remove:function(t){$.get({_id:t},"/thing/remove.do",function(t){this.load(),$.notice("\u5220\u9664\u6210\u529f!","success")},this)}}},xa=Object(o.a)(ka,va,[],!1,null,null,null);xa.options.__file="project/list/index.vue";var Ca=xa.exports,za={a:"rgba(248, 14, 21, .5)",b:"rgba(190, 175, 4, .8)",c:"rgba(0, 159, 227, .7)",d:"rgba(121, 170, 28, .7)"},$a={name:"zh-cn",weekdays:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],weekdaysShort:["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],weekdaysMin:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthsShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],ordinal:function(t,e){switch(e){case"W":return"".concat(t,"\u5468");default:return"".concat(t,"\u65e5")}},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5ddddAh\u70b9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},meridiem:function(t,e){var i=100*t+e;return i<600?"\u51cc\u6668":i<900?"\u65e9\u4e0a":i<1130?"\u4e0a\u5348":i<1230?"\u4e2d\u5348":i<1800?"\u4e0b\u5348":"\u665a\u4e0a"}},ja=i(3),Sa=i.n(ja),Ia=i(4),Ea=i.n(Ia),Oa=$.debounce(function(t){$.post({},"/thing/patch.do")},500),Ta={item:[function(){function i(t,e){Sa()(this,i),this.data=e,this.onClick=this.onClick.bind(this),t.addEventListener("click",this.onClick)}return Ea()(i,[{key:"destroy",value:function(t){t.removeEventListener("click",this.onClick)}},{key:"update",value:function(t,e){var i=t.classList.contains("resizing");e.item.isResizing&&!i?t.classList.add("resizing"):!e.item.isResizing&&i&&(Oa(item.data),t.classList.remove("resizing"))}},{key:"onClick",value:function(){$.emit("thingDetail",this.data.item.id)}}]),i}()],row:[function(){function i(t,e){Sa()(this,i),this.data=e,this.onClick=this.onClick.bind(this),t.addEventListener("click",this.onClick)}return Ea()(i,[{key:"destroy",value:function(t){t.removeEventListener("click",this.onClick)}},{key:"onClick",value:function(){$.emit("thingDetail",this.data.rowId)}}]),i}()],grid:[function(){function i(t,e){Sa()(this,i),this.data=e,this.onClick=this.onClick.bind(this),t.addEventListener("dblclick",this.onClick)}return Ea()(i,[{key:"destroy",value:function(t){t.removeEventListener("dblclick",this.onClick)}},{key:"onClick",value:function(){var t=this.data.time,e=$.date(parseInt(t.leftGlobal)/1e3),i=$.date(parseInt(t.rightGlobal/1e3));$.emit("thingAdd",{range:[e,i]})}}]),i}()]},La={props:["value"],data:function(){return{instance:null,height:0}},created:function(){var n=this;this.calHeight(),$.lib(["gantt/gantt.js","gantt/style.css"],this.init),$.on("ganttConfig",function(t,e){if("now"===e){var i=n.instance;return i.api.scrollToTime(i.api.time.date().valueOf())}"period"===t&&GSTC.api.setPeriod(e)})},destroyed:function(){this.instance.app.destroy(),$.off("ganttConfig"),window.removeEventListener("resize",this.calHeight)},render:function(t){return t("div",{class:"k-project-gantt"})},methods:{calHeight:function(){0===this.height?window.addEventListener("resize",this.calHeight):this.instance.state.update("config.height",this.height);var t=(document.documentElement.clientHeight||document.body.clientHeight)-120;t!==this.height&&(this.height=t)},init:function(){var t,e,i,n,a,s,r,o=this,l=(t=this.value.things,a={rows:{},items:{}},t.forEach(function(t){e=t._id,i=t.title,a.rows[e]={id:e,label:i},n=t.end?1e3*t.end:1e3*(t.start+10800),a.items[e]={id:e,label:i,time:{start:1e3*t.start,end:n},rowId:e,style:{background:za[t.quadrant||"b"]}}}),a),c=(s=this.height,r=l,{plugins:[ItemMovement({moveable:!0,resizeable:!0,collisionDetection:!0}),CalendarScroll(),WeekendHighlight()],locale:$a,height:s,list:{toggle:{display:!1},rows:r.rows,rowHeight:38,columns:{resizer:{inRealTime:!1,dots:0},data:{label:{id:"label",data:"label",expander:!0,isHTML:!1,width:400,header:{content:"\u4efb\u52a1\u6807\u9898"}}}}},chart:{items:r.items,time:{period:"day",additionalSpaces:{day:{before:1,after:1,period:"month"},week:{before:1,after:1,period:"year"},month:{before:6,after:6,period:"year"},year:{before:12,after:12,period:"year"}}}},expander:{padding:4},actions:{"chart-timeline-items-row-item":Ta.item,"chart-timeline-grid-row-block":Ta.grid,"list-column-row":Ta.row}}),u=GSTC.api.stateFromConfig(c),d=this.$el;u.subscribe("config.plugin.ItemMovement",function(t){t&&t.item&&u.update("config.chart.items.".concat(t.item.id,".isResizing"),t.item.resizing)}),d.addEventListener("gstc-loaded",function(){o.instance.api.scrollToTime((new Date).getTime())}),this.instance=GSTC({element:d,state:u})}}},Da={props:["name","value"],data:function(){return{current:null,active:"day"}},computed:{com:function(){var t=this.current;return"board"===t?fa:"list"===t?Ca:"gantt"===t?La:null}},created:function(){var e=this;this.current=this.name,$.on("projectView",function(t){e.current=t})},methods:{emit:function(t){this.active=t,$.emit("ganttConfig","period",t)}}},Pa=Object(o.a)(Da,Un,[],!1,null,null,null);Pa.options.__file="project/view.vue";var Na=Pa.exports,Ma=parseInt((new Date).getTime()/1e3),Aa={props:["value"],data:function(){return{categorys:[],category:null}},render:function(t){var e,i,n=t,a=this.value;return i=1===a.status?(e="ft gray","\u5df2\u5b8c\u6210"):a.end&&a.end<Ma?(e="ft red","\u5df2\u8d85\u65f6"):(e="ft green","\u672a\u5b8c\u6210"),n("span",{class:e},[i])},methods:{change:function(a){var s=this;return jt()(zt.a.mark(function t(){var e,i,n;return zt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.value,i={_id:e._id,category:a.id},1===a.type&&(i.status=a.type),t.next=4,$.post(i,"/thing/patch.do");case 4:Vue.set(s.value,"category",a.id),$.emit("thingUpdate",e,"category"),n="\u66f4\u65b0\u4e86\u4efb\u52a1\u72b6\u6001"+a.title,$.post({thingId:e._id,content:n},"/put/thingLog.json",function(t){});case 8:case"end":return t.stop()}},t)}))()}}};zen.loginURL="/home.html",function(){var i=window.location.pathname;if(!("/"===i||-1<i.indexOf(".html"))){var t="";zen.mode<3&&(t="//a.yimiyisu.com/kooteam");var e="url('"+t+"/bg/3.jpg')";$("body").css("background-image",e);var n=$("#J_navbar"),a="active";$("a",n).el.forEach(function(t){var e=$(t);e.attr("href")===i&&e.parent().addClass("active")}),$("a",n).on("click",function(t){var e=$(t.target);$("."+a,n).removeClass(a),e.parent().addClass(a)})}}(),Vue.component("k-doc",fi),Vue.component("k-thing",v),Vue.component("k-thing-restore",bi),Vue.component("k-calendar",_e),Vue.component("k-todo",k),Vue.component("k-todo-add",hn),Vue.component("k-todo-detail",se),Vue.component("k-thing-status",Aa),Vue.component("k-system",qi),Vue.component("k-login",Qi),Vue.component("k-report",on),Vue.component("k-project",Wn),Vue.component("k-project-view",Na)}],c.c=b,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(i,n,function(t){return e[t]}.bind(null,n));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c(c.s=8);